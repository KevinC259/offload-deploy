import{d as oa,M as pe,I as la,r as m,L as T,G as ta,c as S,a as c,b as a,z as _,w as t,f as V,p as De,O as ra,i as x,t as E,E as h,k as f,u as ge,U as na,Q as Ne,F as ae,n as oe,N as le,J as Pe,g as sa,o as p,_ as ia}from"./index-CSkJ4Wth.js";import{i as ke,j as R,f as da,k as ua,e as ma}from"./function-CwdAX250.js";import"./request-Bb7olHYx.js";import"./index-xsH4HHeE.js";import"./auth-CnjZ6pwZ.js";const ca={class:"scalarView-container"},pa={class:"scalarView-top-actions"},ga={class:"scalarView-module"},fa={class:"scalarView-table"},va={class:"scalarView-header"},ba={class:"scalarView-header-right"},ya={class:"scalarView-header-search"},Sa={class:"table-wrapper"},wa={key:0},Va={key:1},ha={key:0},xa={key:1},_a={key:0},Da={key:1},Na={class:"empty-state"},Pa={key:0,class:"custom-pagination"},ka={class:"pagination-total"},za={class:"pagination-sizes"},Ca={class:"scalarView-module"},Ta={class:"scalarView-table"},Ea={class:"scalarView-header"},Ha={class:"scalarView-header-right"},Ua={class:"scalarView-header-search"},Ba={class:"table-wrapper"},Fa={class:"empty-state"},Ma={key:0,class:"custom-pagination"},qa={class:"pagination-total"},Aa={class:"pagination-sizes"},Ia={class:"dialog-footer"},Ra={class:"dialog-footer"},$a={class:"dialog-footer"},Oa={class:"dialog-footer"},La={key:0,class:"global-actions"},ja=oa({__name:"ScalarView",setup(Ja){const te=sa(),j=la(),re=pe(()=>j.name==="nav_scalar"),J=m([]),Q=m(!1),ze=m(1),Ce=m(20),D=m([]),ne=m(!0),N=m(1),B=m(10),fe=[10,20,50,100],se=m(""),P=m(!1),$=m(!1),K=m(),G=m(),F=m(0),ie=m(!1),n=T({id:"",name:"",type:"dataSource",dataSourceName:"",start:null,end:null,operator:"",bandwidth:null,minHorizontalDistance:null,minProminence:null,expression:""}),r=T({id:"",name:"",type:"dataSource",dataSourceName:"",start:null,end:null,operator:"",bandwidth:null,minHorizontalDistance:null,minProminence:null,expression:""}),W=l=>(e,s,i)=>{s==null?i(new Error(`请输入${l}`)):s<=0?i(new Error(`${l}必须大于0`)):i()},ve=(l,e,s)=>{const i=P.value?n.operator:r.operator;i==="Valley Bandwidth"||i==="Peak Bandwidth"?e==null?s(new Error("请输入带宽阈值")):Number(e)<=0?s(new Error("带宽阈值必须大于0")):s():s()},be=(l,e,s)=>{const i=P.value?n.operator:r.operator;i==="Number of Valley"||i==="Number of Peak"?e==null?s(new Error("请输入最小水平距离")):Number(e)<=0?s(new Error("最小水平距离必须大于0")):s():s()},ye=(l,e,s)=>{const i=P.value?n.operator:r.operator;i==="Number of Valley"||i==="Number of Peak"?e==null?s(new Error("请输入最小prominence")):Number(e)<=0?s(new Error("最小prominence必须大于0")):s():s()},Te=T({name:[{required:!0,message:"请输入标量名称",trigger:"blur"}],dataSourceName:[{required:!0,message:"请选择数据源",trigger:"change"}],start:[{required:!0,message:"请输入频段起始点",trigger:"blur"},{validator:W("频段起始点"),trigger:"blur"}],end:[{required:!0,message:"请输入频段终止点",trigger:"blur"},{validator:W("频段终止点"),trigger:"blur"},{validator:(l,e,s)=>{n.start!==null&&e!==null&&e<=n.start?s(new Error("频段终止点必须大于频段起始点")):s()},trigger:"blur"}],operator:[{required:!0,message:"请选择操作符",trigger:"change"}],bandwidth:[{validator:ve,trigger:"blur"}],minHorizontalDistance:[{validator:be,trigger:"blur"}],minProminence:[{validator:ye,trigger:"blur"}]}),Ee=T({name:[{required:!0,message:"请输入标量名称",trigger:"blur"}],dataSourceName:[{required:!0,message:"请选择数据源",trigger:"change"}],start:[{required:!0,message:"请输入频段起始点",trigger:"blur"},{validator:W("频段起始点"),trigger:"blur"}],end:[{required:!0,message:"请输入频段终止点",trigger:"blur"},{validator:W("频段终止点"),trigger:"blur"},{validator:(l,e,s)=>{r.start!==null&&e!==null&&e<=r.start?s(new Error("频段终止点必须大于频段起始点")):s()},trigger:"blur"}],operator:[{required:!0,message:"请选择操作符",trigger:"change"}],bandwidth:[{validator:ve,trigger:"blur"}],minHorizontalDistance:[{validator:be,trigger:"blur"}],minProminence:[{validator:ye,trigger:"blur"}]}),He=pe(()=>D.value),Ue=l=>{B.value=l,N.value=1,H()},Be=l=>{N.value=l,H()},Se=()=>{N.value=1,H()},de=async(l="")=>{try{Q.value=!0;const e={name:l,page:{pageNum:ze.value,pageSize:Ce.value}},s=await da(e);s.list&&Array.isArray(s.list)?J.value=s.list:J.value=[]}catch(e){console.error("Failed to load data sources:",e),h.error("加载数据源失败，请稍后重试")}finally{Q.value=!1}},we=async l=>{await de(l)},H=async()=>{ne.value=!0;try{const l={name:se.value,type:"dataSource",page:{pageNum:N.value,pageSize:B.value}},e=await ke(l);e.list&&Array.isArray(e.list)?(D.value=e.list,F.value=e.total||0):(D.value=[],F.value=0)}catch(l){console.error("Failed to load data source table data:",l),h.error("加载数据源标量失败，请稍后重试")}finally{ne.value=!1}},Fe=async()=>{var l;P.value=!0,await le(),(l=K.value)==null||l.resetFields(),Object.assign(n,{id:"",name:"",type:"dataSource",dataSourceName:"",start:null,end:null,operator:"",bandwidth:null,minHorizontalDistance:null,minProminence:null,expression:""}),de()},Me=async l=>{var e;$.value=!0,await le(),Object.assign(r,{id:l.id,name:l.name,type:"dataSource",dataSourceName:l.dataSourceName||"",start:l.start!==void 0&&l.start!==null?parseFloat(l.start.toString()):null,end:l.end!==void 0&&l.end!==null?parseFloat(l.end.toString()):null,operator:l.operator||"",bandwidth:l.bandwidth!==void 0&&l.bandwidth!==null?parseFloat(l.bandwidth.toString()):null,minHorizontalDistance:l.minHorizontalDistance!==void 0&&l.minHorizontalDistance!==null?parseFloat(l.minHorizontalDistance.toString()):null,minProminence:l.minProminence!==void 0&&l.minProminence!==null?parseFloat(l.minProminence.toString()):null,expression:l.expression||""}),(e=G.value)==null||e.clearValidate(),de()},qe=async()=>{K.value&&await K.value.validate(async l=>{var e,s,i,u,v;if(l)try{console.log("=== 新建数据源标量 - 开始监控 ==="),console.log("表单原始数据:",{name:n.name,dataSourceName:n.dataSourceName,start:n.start,end:n.end,operator:n.operator,bandwidth:n.bandwidth,minHorizontalDistance:n.minHorizontalDistance,minProminence:n.minProminence});const d={operationType:"add",scalarName:n.name,scalarType:"dataSource",dataSourceName:n.dataSourceName,start:((e=n.start)==null?void 0:e.toString())||"",end:((s=n.end)==null?void 0:s.toString())||"",operator:n.operator,bandwidth:(n.operator==="Valley Bandwidth"||n.operator==="Peak Bandwidth")&&((i=n.bandwidth)==null?void 0:i.toString())||"",minHorizontalDistance:(n.operator==="Number of Valley"||n.operator==="Number of Peak")&&((u=n.minHorizontalDistance)==null?void 0:u.toString())||"",minProminence:(n.operator==="Number of Valley"||n.operator==="Number of Peak")&&((v=n.minProminence)==null?void 0:v.toString())||"",expression:""};console.log("发送给后端的请求数据:",d),console.log("请求数据详细分析:"),console.log("- 操作类型:",d.operationType),console.log("- 标量名称:",d.scalarName),console.log("- 标量类型:",d.scalarType),console.log("- 数据源名称:",d.dataSourceName),console.log("- 频段起始点:",d.start,"(类型:",typeof d.start,")"),console.log("- 频段终止点:",d.end,"(类型:",typeof d.end,")"),console.log("- 操作符:",d.operator),console.log("- 带宽阈值:",d.bandwidth,"(类型:",typeof d.bandwidth,")"),console.log("- 最小水平距离:",d.minHorizontalDistance,"(类型:",typeof d.minHorizontalDistance,")"),console.log("- 最小prominence:",d.minProminence,"(类型:",typeof d.minProminence,")"),console.log("- 表达式:",d.expression),console.log("=== 开始调用后端API ===");const A=Date.now();await R(d);const g=Date.now();console.log(`=== API调用成功，耗时: ${g-A}ms ===`),P.value=!1,H()}catch(d){console.error("=== 新建数据源标量失败 ==="),console.error("错误详情:",d),console.error("失败时的请求数据:",{name:n.name,dataSourceName:n.dataSourceName,start:n.start,end:n.end,operator:n.operator,bandwidth:n.bandwidth,minHorizontalDistance:n.minHorizontalDistance,minProminence:n.minProminence}),h.error("添加失败，请稍后重试")}else console.log("=== 表单验证失败 ==="),console.log("当前表单数据:",n)})},Ae=async()=>{G.value&&await G.value.validate(async l=>{var e,s,i,u,v;if(l)try{console.log("=== 编辑数据源标量 - 开始监控 ==="),console.log("表单原始数据:",{id:r.id,name:r.name,dataSourceName:r.dataSourceName,start:r.start,end:r.end,operator:r.operator,bandwidth:r.bandwidth,minHorizontalDistance:r.minHorizontalDistance,minProminence:r.minProminence});const d={id:r.id,operationType:"edit",scalarName:r.name,scalarType:"dataSource",dataSourceName:r.dataSourceName,start:((e=r.start)==null?void 0:e.toString())||"",end:((s=r.end)==null?void 0:s.toString())||"",operator:r.operator,bandwidth:(r.operator==="Valley Bandwidth"||r.operator==="Peak Bandwidth")&&((i=r.bandwidth)==null?void 0:i.toString())||"",minHorizontalDistance:(r.operator==="Number of Valley"||r.operator==="Number of Peak")&&((u=r.minHorizontalDistance)==null?void 0:u.toString())||"",minProminence:(r.operator==="Number of Valley"||r.operator==="Number of Peak")&&((v=r.minProminence)==null?void 0:v.toString())||"",expression:""};console.log("发送给后端的请求数据:",d),console.log("请求数据详细分析:"),console.log("- ID:",d.id),console.log("- 操作类型:",d.operationType),console.log("- 标量名称:",d.scalarName),console.log("- 标量类型:",d.scalarType),console.log("- 数据源名称:",d.dataSourceName),console.log("- 频段起始点:",d.start,"(类型:",typeof d.start,")"),console.log("- 频段终止点:",d.end,"(类型:",typeof d.end,")"),console.log("- 操作符:",d.operator),console.log("- 带宽阈值:",d.bandwidth,"(类型:",typeof d.bandwidth,")"),console.log("- 最小水平距离:",d.minHorizontalDistance,"(类型:",typeof d.minHorizontalDistance,")"),console.log("- 最小prominence:",d.minProminence,"(类型:",typeof d.minProminence,")"),console.log("- 表达式:",d.expression),console.log("=== 开始调用后端API ===");const A=Date.now();await R(d);const g=Date.now();console.log(`=== API调用成功，耗时: ${g-A}ms ===`),$.value=!1,H()}catch(d){console.error("=== 编辑数据源标量失败 ==="),console.error("错误详情:",d),console.error("失败时的请求数据:",{id:r.id,name:r.name,dataSourceName:r.dataSourceName,start:r.start,end:r.end,operator:r.operator,bandwidth:r.bandwidth,minHorizontalDistance:r.minHorizontalDistance,minProminence:r.minProminence}),h.error("编辑失败，请稍后重试")}else console.log("=== 表单验证失败 ==="),console.log("当前表单数据:",r)})},Ie=l=>{Pe.confirm("确定要删除该数据源标量吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const e={id:l.id,operationType:"delete"};await R(e),D.value.length===1&&N.value>1&&N.value--,H()}catch(e){console.error("Failed to delete data source scalar:",e)}}).catch(()=>{})},k=m([]),ue=m(!0),z=m(1),M=m(10),me=m(""),O=m(!1),L=m(!1),X=m(),Y=m(),q=m(0),w=T({name:"",expression:""}),y=T({id:"",name:"",expression:""}),Re=T({name:[{required:!0,message:"请输入标量名称",trigger:"blur"}],expression:[{required:!0,message:"请输入表达式",trigger:"blur"}]}),$e=T({name:[{required:!0,message:"请输入标量名称",trigger:"blur"}],expression:[{required:!0,message:"请输入表达式",trigger:"blur"}]}),Oe=pe(()=>k.value),Le=l=>{M.value=l,z.value=1,U()},je=l=>{z.value=l,U()},Ve=()=>{z.value=1,U()},U=async()=>{ue.value=!0;try{const l={name:me.value,type:"expression",page:{pageNum:z.value,pageSize:M.value}},e=await ke(l);e.list&&Array.isArray(e.list)?(k.value=e.list,q.value=e.total||0):(k.value=[],q.value=0)}catch(l){console.error("Failed to load expression table data:",l),h.error("加载表达式标量失败，请稍后重试")}finally{ue.value=!1}},Je=async()=>{var l;O.value=!0,await le(),(l=X.value)==null||l.resetFields(),Object.assign(w,{name:"",expression:""})},Qe=async l=>{var e;L.value=!0,await le(),Object.assign(y,{id:l.id,name:l.name,expression:l.expression||""}),(e=Y.value)==null||e.clearValidate()},Ke=async()=>{X.value&&await X.value.validate(async l=>{if(l)try{console.log("=== 新建表达式标量 - 开始监控 ==="),console.log("表单原始数据:",{name:w.name,expression:w.expression});const e={operationType:"add",scalarName:w.name,scalarType:"expression",expression:w.expression};console.log("发送给后端的请求数据:",e),console.log("请求数据详细分析:"),console.log("- 操作类型:",e.operationType),console.log("- 标量名称:",e.scalarName),console.log("- 标量类型:",e.scalarType),console.log("- 表达式:",e.expression,"(类型:",typeof e.expression,")"),console.log("=== 开始调用后端API ===");const s=Date.now();await R(e);const i=Date.now();console.log(`=== API调用成功，耗时: ${i-s}ms ===`),O.value=!1,U()}catch(e){console.error("=== 新建表达式标量失败 ==="),console.error("错误详情:",e),console.error("失败时的请求数据:",{name:w.name,expression:w.expression}),h.error("添加失败，请稍后重试")}else console.log("=== 表单验证失败 ==="),console.log("当前表单数据:",w)})},Ge=async()=>{Y.value&&await Y.value.validate(async l=>{if(l)try{console.log("=== 编辑表达式标量 - 开始监控 ==="),console.log("表单原始数据:",{id:y.id,name:y.name,expression:y.expression});const e={id:y.id,operationType:"edit",scalarName:y.name,scalarType:"expression",expression:y.expression};console.log("发送给后端的请求数据:",e),console.log("请求数据详细分析:"),console.log("- ID:",e.id),console.log("- 操作类型:",e.operationType),console.log("- 标量名称:",e.scalarName),console.log("- 标量类型:",e.scalarType),console.log("- 表达式:",e.expression,"(类型:",typeof e.expression,")"),console.log("=== 开始调用后端API ===");const s=Date.now();await R(e);const i=Date.now();console.log(`=== API调用成功，耗时: ${i-s}ms ===`),L.value=!1,U()}catch(e){console.error("=== 编辑表达式标量失败 ==="),console.error("错误详情:",e),console.error("失败时的请求数据:",{id:y.id,name:y.name,expression:y.expression}),h.error("编辑失败，请稍后重试")}else console.log("=== 表单验证失败 ==="),console.log("当前表单数据:",y)})},We=l=>{Pe.confirm("确定要删除该表达式标量吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const e={id:l.id,operationType:"delete"};await R(e),k.value.length===1&&z.value>1&&z.value--,U()}catch(e){console.error("Failed to delete expression scalar:",e)}}).catch(()=>{})},C=()=>{P.value=!1,$.value=!1,O.value=!1,L.value=!1},Xe=async()=>{try{ie.value=!0;const l=await ua(),e=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s;const u=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19);i.download=`optimizer_main_config_${u}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s),h.success("配置导出成功")}catch(l){console.error("Failed to export config:",l),h.error("配置导出失败，请稍后重试")}finally{ie.value=!1}},Ye=()=>{re.value?te.push({name:"nav_dataSource"}):te.back()},he=async()=>{try{const l=`scalar_${String(j.name)}`,e={dataSourceScalars:D.value,expressionScalars:k.value,timestamp:new Date().toISOString(),routeName:j.name};localStorage.setItem(l,JSON.stringify(e))}catch(l){console.error("保存配置失败:",l),h.error("保存配置失败")}},Ze=async()=>{try{const l={dataSourceScalars:D.value,expressionScalars:k.value,timestamp:new Date().toISOString(),stepName:"标量"};await ma(),console.log("标量配置已保存到后端:",l)}catch(l){throw console.error("保存配置失败:",l),l}},ea=async()=>{try{await he(),await Ze(),h.success("配置已保存并导出，正在跳转到下一步"),te.push({name:"nav_optimizationTargets"})}catch(l){console.error("下一步操作失败:",l),h.error("操作失败，请重试")}},aa=()=>{if(re.value)try{const l=`scalar_${String(j.name)}`,e=localStorage.getItem(l);if(e){const s=JSON.parse(e);D.value=s.dataSourceScalars||[],k.value=s.expressionScalars||[],F.value=D.value.length,q.value=k.value.length}}catch(l){console.error("加载配置失败:",l)}};return ta(async()=>{aa(),await H(),await U()}),(l,e)=>{const s=V("el-icon"),i=V("el-button"),u=V("el-input"),v=V("el-table-column"),d=V("el-empty"),A=V("el-table"),g=V("el-option"),I=V("el-select"),xe=V("el-pagination"),b=V("el-form-item"),Z=V("el-form"),ee=V("el-dialog"),_e=ra("loading");return p(),S("div",ca,[c("div",pa,[a(i,{type:"success",onClick:Xe,loading:ie.value},{default:t(()=>[a(s,null,{default:t(()=>[a(ge(na))]),_:1}),e[28]||(e[28]=f(" 导出配置 "))]),_:1},8,["loading"])]),c("div",ga,[c("div",fa,[c("div",va,[e[30]||(e[30]=c("span",null,"从数据源定义",-1)),c("div",ba,[c("div",ya,[a(u,{modelValue:se.value,"onUpdate:modelValue":e[0]||(e[0]=o=>se.value=o),placeholder:"请输入标量名称",clearable:"",style:{width:"200px"},onInput:Se,onClear:Se},{suffix:t(()=>[a(s,null,{default:t(()=>[a(ge(Ne))]),_:1})]),_:1},8,["modelValue"])]),a(i,{type:"primary",onClick:Fe},{default:t(()=>e[29]||(e[29]=[f("添加标量")])),_:1})])]),c("div",Sa,[De((p(),x(A,{data:He.value,style:{width:"100%"},height:"100%"},{empty:t(()=>[c("div",Na,[a(d,{description:"暂无数据"})])]),default:t(()=>[a(v,{label:"序号",width:"100"},{default:t(o=>[f(E((N.value-1)*B.value+o.$index+1),1)]),_:1}),a(v,{prop:"name",label:"标量名称",width:"200"}),a(v,{label:"数据源",width:"250"},{default:t(o=>[f(E(o.row.dataSourceName||"-"),1)]),_:1}),a(v,{prop:"start",label:"频段起始点",width:"150"}),a(v,{prop:"end",label:"频段终止点",width:"150"}),a(v,{prop:"operator",label:"操作符",width:"120"}),a(v,{label:"带宽阈值",width:"120"},{default:t(o=>[o.row.operator==="Valley Bandwidth"||o.row.operator==="Peak Bandwidth"?(p(),S("span",wa,E(o.row.bandwidth||"-"),1)):(p(),S("span",Va,"-"))]),_:1}),a(v,{label:"最小水平距离",width:"140"},{default:t(o=>[o.row.operator==="Number of Valley"||o.row.operator==="Number of Peak"?(p(),S("span",ha,E(o.row.minHorizontalDistance||"-"),1)):(p(),S("span",xa,"-"))]),_:1}),a(v,{label:"最小prominence",width:"140"},{default:t(o=>[o.row.operator==="Number of Valley"||o.row.operator==="Number of Peak"?(p(),S("span",_a,E(o.row.minProminence||"-"),1)):(p(),S("span",Da,"-"))]),_:1}),a(v,{fixed:"right",label:"操作","min-width":"120"},{default:t(o=>[a(i,{link:"",type:"primary",onClick:ce=>Me(o.row)},{default:t(()=>e[31]||(e[31]=[f(" 编辑 ")])),_:2},1032,["onClick"]),a(i,{link:"",type:"danger",onClick:ce=>Ie(o.row)},{default:t(()=>e[32]||(e[32]=[f(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[_e,ne.value]])]),F.value>0?(p(),S("div",Pa,[c("span",ka,"共 "+E(F.value)+" 条",1),c("div",za,[a(I,{modelValue:B.value,"onUpdate:modelValue":e[1]||(e[1]=o=>B.value=o),onChange:Ue,placeholder:"条/页",style:{width:"100px"}},{default:t(()=>[(p(),S(ae,null,oe(fe,o=>a(g,{key:o,label:`${o} 条/页`,value:o},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),a(xe,{background:"",layout:"prev, pager, next",total:F.value,"current-page":N.value,"page-size":B.value,onCurrentChange:Be},null,8,["total","current-page","page-size"])])):_("",!0)])]),c("div",Ca,[c("div",Ta,[c("div",Ea,[e[34]||(e[34]=c("span",null,"从表达式定义",-1)),c("div",Ha,[c("div",Ua,[a(u,{modelValue:me.value,"onUpdate:modelValue":e[2]||(e[2]=o=>me.value=o),placeholder:"请输入标量名称",clearable:"",style:{width:"200px"},onInput:Ve,onClear:Ve},{suffix:t(()=>[a(s,null,{default:t(()=>[a(ge(Ne))]),_:1})]),_:1},8,["modelValue"])]),a(i,{type:"primary",onClick:Je},{default:t(()=>e[33]||(e[33]=[f("添加标量")])),_:1})])]),c("div",Ba,[De((p(),x(A,{data:Oe.value,style:{width:"100%"},height:"100%"},{empty:t(()=>[c("div",Fa,[a(d,{description:"暂无数据"})])]),default:t(()=>[a(v,{label:"序号",width:"100"},{default:t(o=>[f(E((z.value-1)*M.value+o.$index+1),1)]),_:1}),a(v,{prop:"name",label:"标量名称",width:"200"}),a(v,{prop:"expression",label:"表达式","min-width":"300"}),a(v,{fixed:"right",label:"操作","min-width":"120"},{default:t(o=>[a(i,{link:"",type:"primary",onClick:ce=>Qe(o.row)},{default:t(()=>e[35]||(e[35]=[f(" 编辑 ")])),_:2},1032,["onClick"]),a(i,{link:"",type:"danger",onClick:ce=>We(o.row)},{default:t(()=>e[36]||(e[36]=[f(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[_e,ue.value]])]),q.value>0?(p(),S("div",Ma,[c("span",qa,"共 "+E(q.value)+" 条",1),c("div",Aa,[a(I,{modelValue:M.value,"onUpdate:modelValue":e[3]||(e[3]=o=>M.value=o),onChange:Le,placeholder:"条/页",style:{width:"100px"}},{default:t(()=>[(p(),S(ae,null,oe(fe,o=>a(g,{key:o,label:`${o} 条/页`,value:o},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),a(xe,{background:"",layout:"prev, pager, next",total:q.value,"current-page":z.value,"page-size":M.value,onCurrentChange:je},null,8,["total","current-page","page-size"])])):_("",!0)])]),a(ee,{title:"添加标量（从数据源定义）",modelValue:P.value,"onUpdate:modelValue":e[12]||(e[12]=o=>P.value=o),width:"600px","before-close":C},{footer:t(()=>[c("span",Ia,[a(i,{onClick:C},{default:t(()=>e[37]||(e[37]=[f("取消")])),_:1}),a(i,{type:"primary",onClick:qe},{default:t(()=>e[38]||(e[38]=[f("确认")])),_:1})])]),default:t(()=>[a(Z,{model:n,rules:Te,ref_key:"addDataSourceScalarFormRef",ref:K,"label-width":"120px"},{default:t(()=>[a(b,{label:"标量名称",prop:"name"},{default:t(()=>[a(u,{modelValue:n.name,"onUpdate:modelValue":e[4]||(e[4]=o=>n.name=o),placeholder:"请输入标量名称"},null,8,["modelValue"])]),_:1}),a(b,{label:"数据源",prop:"dataSourceName"},{default:t(()=>[a(I,{modelValue:n.dataSourceName,"onUpdate:modelValue":e[5]||(e[5]=o=>n.dataSourceName=o),placeholder:"请选择数据源",filterable:"",remote:"","remote-method":we,loading:Q.value},{default:t(()=>[(p(!0),S(ae,null,oe(J.value,o=>(p(),x(g,{key:o.id,label:o.sourceName,value:o.sourceName},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),a(b,{label:"频段起始点",prop:"start"},{default:t(()=>[a(u,{modelValue:n.start,"onUpdate:modelValue":e[6]||(e[6]=o=>n.start=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入频段起始点"},null,8,["modelValue"])]),_:1}),a(b,{label:"频段终止点",prop:"end"},{default:t(()=>[a(u,{modelValue:n.end,"onUpdate:modelValue":e[7]||(e[7]=o=>n.end=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入频段终止点"},null,8,["modelValue"])]),_:1}),a(b,{label:"操作符",prop:"operator"},{default:t(()=>[a(I,{modelValue:n.operator,"onUpdate:modelValue":e[8]||(e[8]=o=>n.operator=o),placeholder:"请选择操作符"},{default:t(()=>[a(g,{label:"Min",value:"Min"}),a(g,{label:"Max",value:"Max"}),a(g,{label:"Avg",value:"Avg"}),a(g,{label:"Valley Bandwidth",value:"Valley Bandwidth"}),a(g,{label:"Peak Bandwidth",value:"Peak Bandwidth"}),a(g,{label:"Number of Valley",value:"Number of Valley"}),a(g,{label:"Number of Peak",value:"Number of Peak"})]),_:1},8,["modelValue"])]),_:1}),n.operator==="Valley Bandwidth"||n.operator==="Peak Bandwidth"?(p(),x(b,{key:0,label:"带宽阈值",prop:"bandwidth"},{default:t(()=>[a(u,{modelValue:n.bandwidth,"onUpdate:modelValue":e[9]||(e[9]=o=>n.bandwidth=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入带宽阈值"},null,8,["modelValue"])]),_:1})):_("",!0),n.operator==="Number of Valley"||n.operator==="Number of Peak"?(p(),x(b,{key:1,label:"最小水平距离",prop:"minHorizontalDistance"},{default:t(()=>[a(u,{modelValue:n.minHorizontalDistance,"onUpdate:modelValue":e[10]||(e[10]=o=>n.minHorizontalDistance=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入最小水平距离"},null,8,["modelValue"])]),_:1})):_("",!0),n.operator==="Number of Valley"||n.operator==="Number of Peak"?(p(),x(b,{key:2,label:"最小prominence",prop:"minProminence"},{default:t(()=>[a(u,{modelValue:n.minProminence,"onUpdate:modelValue":e[11]||(e[11]=o=>n.minProminence=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入最小prominence"},null,8,["modelValue"])]),_:1})):_("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(ee,{title:"编辑标量（从数据源定义）",modelValue:$.value,"onUpdate:modelValue":e[21]||(e[21]=o=>$.value=o),width:"600px","before-close":C},{footer:t(()=>[c("span",Ra,[a(i,{onClick:C},{default:t(()=>e[39]||(e[39]=[f("取消")])),_:1}),a(i,{type:"primary",onClick:Ae},{default:t(()=>e[40]||(e[40]=[f("确认")])),_:1})])]),default:t(()=>[a(Z,{model:r,rules:Ee,ref_key:"editDataSourceScalarFormRef",ref:G,"label-width":"120px"},{default:t(()=>[a(b,{label:"标量名称",prop:"name"},{default:t(()=>[a(u,{modelValue:r.name,"onUpdate:modelValue":e[13]||(e[13]=o=>r.name=o),placeholder:"请输入标量名称",disabled:""},null,8,["modelValue"])]),_:1}),a(b,{label:"数据源",prop:"dataSourceName"},{default:t(()=>[a(I,{modelValue:r.dataSourceName,"onUpdate:modelValue":e[14]||(e[14]=o=>r.dataSourceName=o),placeholder:"请选择数据源",filterable:"",remote:"","remote-method":we,loading:Q.value},{default:t(()=>[(p(!0),S(ae,null,oe(J.value,o=>(p(),x(g,{key:o.id,label:o.sourceName,value:o.sourceName},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),a(b,{label:"频段起始点",prop:"start"},{default:t(()=>[a(u,{modelValue:r.start,"onUpdate:modelValue":e[15]||(e[15]=o=>r.start=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入频段起始点"},null,8,["modelValue"])]),_:1}),a(b,{label:"频段终止点",prop:"end"},{default:t(()=>[a(u,{modelValue:r.end,"onUpdate:modelValue":e[16]||(e[16]=o=>r.end=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入频段终止点"},null,8,["modelValue"])]),_:1}),a(b,{label:"操作符",prop:"operator"},{default:t(()=>[a(I,{modelValue:r.operator,"onUpdate:modelValue":e[17]||(e[17]=o=>r.operator=o),placeholder:"请选择操作符"},{default:t(()=>[a(g,{label:"Min",value:"Min"}),a(g,{label:"Max",value:"Max"}),a(g,{label:"Avg",value:"Avg"}),a(g,{label:"Valley Bandwidth",value:"Valley Bandwidth"}),a(g,{label:"Peak Bandwidth",value:"Peak Bandwidth"}),a(g,{label:"Number of Valley",value:"Number of Valley"}),a(g,{label:"Number of Peak",value:"Number of Peak"})]),_:1},8,["modelValue"])]),_:1}),r.operator==="Valley Bandwidth"||r.operator==="Peak Bandwidth"?(p(),x(b,{key:0,label:"带宽阈值",prop:"bandwidth"},{default:t(()=>[a(u,{modelValue:r.bandwidth,"onUpdate:modelValue":e[18]||(e[18]=o=>r.bandwidth=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入带宽阈值"},null,8,["modelValue"])]),_:1})):_("",!0),r.operator==="Number of Valley"||r.operator==="Number of Peak"?(p(),x(b,{key:1,label:"最小水平距离",prop:"minHorizontalDistance"},{default:t(()=>[a(u,{modelValue:r.minHorizontalDistance,"onUpdate:modelValue":e[19]||(e[19]=o=>r.minHorizontalDistance=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入最小水平距离"},null,8,["modelValue"])]),_:1})):_("",!0),r.operator==="Number of Valley"||r.operator==="Number of Peak"?(p(),x(b,{key:2,label:"最小prominence",prop:"minProminence"},{default:t(()=>[a(u,{modelValue:r.minProminence,"onUpdate:modelValue":e[20]||(e[20]=o=>r.minProminence=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入最小prominence"},null,8,["modelValue"])]),_:1})):_("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(ee,{title:"添加标量（从表达式定义）",modelValue:O.value,"onUpdate:modelValue":e[24]||(e[24]=o=>O.value=o),width:"600px","before-close":C},{footer:t(()=>[c("span",$a,[a(i,{onClick:C},{default:t(()=>e[41]||(e[41]=[f("取消")])),_:1}),a(i,{type:"primary",onClick:Ke},{default:t(()=>e[42]||(e[42]=[f("确认")])),_:1})])]),default:t(()=>[a(Z,{model:w,rules:Re,ref_key:"addExpressionScalarFormRef",ref:X,"label-width":"120px"},{default:t(()=>[a(b,{label:"标量名称",prop:"name"},{default:t(()=>[a(u,{modelValue:w.name,"onUpdate:modelValue":e[22]||(e[22]=o=>w.name=o),placeholder:"请输入标量名称"},null,8,["modelValue"])]),_:1}),a(b,{label:"表达式",prop:"expression"},{default:t(()=>[a(u,{modelValue:w.expression,"onUpdate:modelValue":e[23]||(e[23]=o=>w.expression=o),placeholder:"请输入表达式"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(ee,{title:"编辑标量（从表达式定义）",modelValue:L.value,"onUpdate:modelValue":e[27]||(e[27]=o=>L.value=o),width:"600px","before-close":C},{footer:t(()=>[c("span",Oa,[a(i,{onClick:C},{default:t(()=>e[43]||(e[43]=[f("取消")])),_:1}),a(i,{type:"primary",onClick:Ge},{default:t(()=>e[44]||(e[44]=[f("确认")])),_:1})])]),default:t(()=>[a(Z,{model:y,rules:$e,ref_key:"editExpressionScalarFormRef",ref:Y,"label-width":"120px"},{default:t(()=>[a(b,{label:"标量名称",prop:"name"},{default:t(()=>[a(u,{modelValue:y.name,"onUpdate:modelValue":e[25]||(e[25]=o=>y.name=o),placeholder:"请输入标量名称",disabled:""},null,8,["modelValue"])]),_:1}),a(b,{label:"表达式",prop:"expression"},{default:t(()=>[a(u,{modelValue:y.expression,"onUpdate:modelValue":e[26]||(e[26]=o=>y.expression=o),placeholder:"请输入表达式"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),re.value?(p(),S("div",La,[a(i,{onClick:Ye},{default:t(()=>e[45]||(e[45]=[f("返回")])),_:1}),a(i,{type:"primary",onClick:he},{default:t(()=>e[46]||(e[46]=[f("保存配置")])),_:1}),a(i,{type:"primary",onClick:ea},{default:t(()=>e[47]||(e[47]=[f("下一步")])),_:1})])):_("",!0)])}}}),Ya=ia(ja,[["__scopeId","data-v-6a5b721e"]]);export{Ya as default};
