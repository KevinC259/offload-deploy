import{d as Tt,r as I,G as Ct,H as St,c as x,b as o,w as s,f as N,E as p,a as d,z as E,i as We,k as g,t as y,F as Ge,n as Qe,u as Xe,v as Ye,J as me,o as T,_ as xt}from"./index-CSkJ4Wth.js";import{a as Nt}from"./index-xsH4HHeE.js";import{u as zt}from"./auth-CnjZ6pwZ.js";const Ut=()=>{if(typeof window<"u"){const R=window.location.hostname,P=window.location.origin;if(console.log("å½“å‰å‰ç«¯è¿è¡Œç¯å¢ƒ:",{hostname:R,origin:P}),R==="localhost"||R==="127.0.0.1")return["http://localhost:8111/api","http://localhost:8111/api"];if(R.includes("vivighr.vip"))return["http://vivighr.vip:8111/api","http://localhost:8111/api"]}return["http://localhost:8111/api","http://vivighr.vip:8111/api"]},F=Ut();let D=0;const Se=R=>{const P=Nt.create({baseURL:R,timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0});return P.interceptors.request.use(i=>{const c=zt().token;return c&&(i.headers.Authorization=`Bearer ${c}`),i},i=>Promise.reject(i)),P};let xe=Se(F[D]);const Ot=()=>{if(D++,D<F.length){const R=F[D];return console.log(`åˆ‡æ¢åˆ°å¤‡é€‰APIåœ°å€: ${R}`),xe=Se(R),!0}return!1},Et=()=>{D=0,xe=Se(F[D])},ge=async R=>{let P;const i=D;for(let r=0;r<F.length;r++)try{console.log(`å°è¯•APIåœ°å€ [${D+1}/${F.length}]: ${F[D]}`);const c=await R(xe);return D!==i&&console.log(`APIè¯·æ±‚æˆåŠŸï¼Œå½“å‰ä½¿ç”¨åœ°å€: ${F[D]}`),c}catch(c){if(P=c,console.error(`APIåœ°å€ ${F[D]} è¯·æ±‚å¤±è´¥:`,c.message),c.code==="ECONNREFUSED"||c.code==="NETWORK_ERROR"||c.response&&[500,502,503,504].includes(c.response.status)){if(!Ot())break}else throw c}throw Et(),P};class A{static async getImageList(P){try{console.log("è·å–å›¾ç‰‡åˆ—è¡¨:",P);const i=await ge(async r=>await r.post("/proxy/images",{output_path:P},{timeout:1e4}));return console.log("è·å–å›¾ç‰‡åˆ—è¡¨æˆåŠŸ:",i.data),i.data||[]}catch(i){console.error("è·å–å›¾ç‰‡åˆ—è¡¨å¤±è´¥:",i);let r="æœªçŸ¥é”™è¯¯";if(i.response){const c=i.response.status,l=i.response.data;c===404?r="å›¾ç‰‡ç›®å½•ä¸å­˜åœ¨æˆ–ä¸ºç©º":c===500?r=`æœåŠ¡å™¨å†…éƒ¨é”™è¯¯: ${(l==null?void 0:l.detail)||(l==null?void 0:l.message)||"è¯·æ£€æŸ¥åç«¯æ—¥å¿—"}`:r=`HTTPé”™è¯¯ (${c}): ${(l==null?void 0:l.detail)||(l==null?void 0:l.message)||i.message}`}else i.request?r="ç½‘ç»œè¿æ¥å¤±è´¥: æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡å™¨":r=i.message||"è¯·æ±‚é…ç½®é”™è¯¯";throw new Error(`è·å–å›¾ç‰‡åˆ—è¡¨å¤±è´¥: ${r}`)}}static async downloadImage(P,i){try{console.log("ä¸‹è½½å›¾ç‰‡:",{outputPath:P,imagePath:i});const r=await ge(async c=>await c.post("/proxy/images/download",{output_path:P,image_name:i},{responseType:"blob",timeout:3e4}));return console.log("å›¾ç‰‡ä¸‹è½½æˆåŠŸ"),r.data}catch(r){console.error("ä¸‹è½½å›¾ç‰‡å¤±è´¥:",r);let c="æœªçŸ¥é”™è¯¯";if(r.response){const l=r.response.status,m=r.response.data;l===404?c="å›¾ç‰‡æ–‡ä»¶ä¸å­˜åœ¨":l===500?c=`æœåŠ¡å™¨å†…éƒ¨é”™è¯¯: ${(m==null?void 0:m.detail)||(m==null?void 0:m.message)||"è¯·æ£€æŸ¥åç«¯æ—¥å¿—"}`:c=`HTTPé”™è¯¯ (${l}): ${(m==null?void 0:m.detail)||(m==null?void 0:m.message)||r.message}`}else r.request?c="ç½‘ç»œè¿æ¥å¤±è´¥: æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡å™¨":c=r.message||"è¯·æ±‚é…ç½®é”™è¯¯";throw new Error(`ä¸‹è½½å›¾ç‰‡å¤±è´¥: ${c}`)}}static async getImagePreviewUrl(P,i){try{const r=await this.downloadImage(P,i);return window.URL.createObjectURL(r)}catch(r){throw console.error("è·å–å›¾ç‰‡é¢„è§ˆURLå¤±è´¥:",r),r}}static async cleanupImages(P){try{console.log("æ¸…ç†å›¾ç‰‡ç¼“å­˜:",P);const i=await ge(async r=>{let c=P;c=c.replace(/\\/g,"/");const l=c.split("/").map(m=>encodeURIComponent(m)).join("/");return await r.delete(`/proxy/images/cleanup/${l}`,{timeout:1e4})});return console.log("å›¾ç‰‡ç¼“å­˜æ¸…ç†æˆåŠŸ:",i.data),i.data||{success:!0,message:"æ¸…ç†å®Œæˆ"}}catch(i){console.error("æ¸…ç†å›¾ç‰‡ç¼“å­˜å¤±è´¥:",i);let r="æœªçŸ¥é”™è¯¯";if(i.response){const c=i.response.status,l=i.response.data;c===404?r="ç¼“å­˜ç›®å½•ä¸å­˜åœ¨":c===500?r=`æœåŠ¡å™¨å†…éƒ¨é”™è¯¯: ${(l==null?void 0:l.detail)||(l==null?void 0:l.message)||"è¯·æ£€æŸ¥åç«¯æ—¥å¿—"}`:r=`HTTPé”™è¯¯ (${c}): ${(l==null?void 0:l.detail)||(l==null?void 0:l.message)||i.message}`}else i.request?r="ç½‘ç»œè¿æ¥å¤±è´¥: æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡å™¨":r=i.message||"è¯·æ±‚é…ç½®é”™è¯¯";throw new Error(`æ¸…ç†å›¾ç‰‡ç¼“å­˜å¤±è´¥: ${r}`)}}static async submitTask(P,i){try{console.log("å‡†å¤‡æäº¤ä»»åŠ¡:",{config:i,jsonDataKeys:Object.keys(P)});const r=new FormData,c=JSON.stringify(P,null,2),l=new Blob([c],{type:"application/json"}),m=new File([l],"predictor_config.conf",{type:"application/json"});r.append("conf_file",m);const z={output_path:i.outputPath,image_path:i.imagePath||i.outputPath,callback_url:i.callbackUrl||"http://vivighr.vip:8111/api/callback",cuda_devices:i.cudaDevices||"0",env:i.env||"pytorch112_py311"};r.append("run_params",JSON.stringify(z)),console.log("æäº¤å‚æ•°:",{configFile:m.name,configSize:m.size,runParams:z});const H=await ge(async B=>await B.post("/run-algorithm/",r,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4}));return console.log("ä»»åŠ¡æäº¤æˆåŠŸ:",H.data),H.data}catch(r){console.error("æäº¤ä»»åŠ¡å¤±è´¥:",r);let c="æœªçŸ¥é”™è¯¯";if(r.response){const l=r.response.status,m=r.response.data;console.error("æœåŠ¡å™¨é”™è¯¯å“åº”:",{status:l,data:m}),l===500?c=`æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ (500): ${(m==null?void 0:m.detail)||(m==null?void 0:m.message)||"è¯·æ£€æŸ¥åç«¯æ—¥å¿—"}`:l===400?c=`è¯·æ±‚å‚æ•°é”™è¯¯ (400): ${(m==null?void 0:m.detail)||(m==null?void 0:m.message)||"è¯·æ£€æŸ¥è¯·æ±‚å‚æ•°"}`:l===404?c="æ¥å£ä¸å­˜åœ¨ (404): è¯·æ£€æŸ¥åç«¯APIè·¯å¾„":c=`HTTPé”™è¯¯ (${l}): ${(m==null?void 0:m.detail)||(m==null?void 0:m.message)||r.message}`}else r.request?c="ç½‘ç»œè¿æ¥å¤±è´¥: æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡å™¨":c=r.message||"è¯·æ±‚é…ç½®é”™è¯¯";throw new Error(`ä»»åŠ¡æäº¤å¤±è´¥: ${c}`)}}static async getTaskStatus(P){try{console.log("æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€:",P);const i=await ge(async l=>{let m=P;return m=m.replace(/\\/g,"/"),await l.post("/status",{output_path:m},{headers:{"Content-Type":"application/json"},timeout:1e4})});console.log("ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢æˆåŠŸ:",i.data);const r=i.data.status;let c=r;return r==="unknown"&&(console.log("ä»»åŠ¡çŠ¶æ€ä¸ºunknownï¼Œè§†ä¸ºå·²å®Œæˆ"),c="completed"),{task_id:P,status:c,message:i.data.message||"",progress:i.data.progress||0,output_path:i.data.outputPath||P,result:i.data.resultFiles||void 0,error:r==="failed"?i.data.message:void 0,start_time:void 0,end_time:r==="completed"?i.data.timestamp:void 0}}catch(i){console.error("æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€å¤±è´¥:",i);let r="æœªçŸ¥é”™è¯¯";if(i.response){const c=i.response.status,l=i.response.data;console.error("æœåŠ¡å™¨é”™è¯¯å“åº”:",{status:c,data:l}),c===404?(console.log("æ”¶åˆ°404é”™è¯¯ï¼Œä»»åŠ¡çŠ¶æ€APIç«¯ç‚¹ä¸å­˜åœ¨"),r="ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢å¤±è´¥ (404): åç«¯æœåŠ¡å™¨æœªå®ç°çŠ¶æ€æŸ¥è¯¢æ¥å£"):c===500?r=`æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ (500): ${(l==null?void 0:l.detail)||(l==null?void 0:l.message)||"è¯·æ£€æŸ¥åç«¯æ—¥å¿—"}`:c===400?r=`è¯·æ±‚å‚æ•°é”™è¯¯ (400): ${(l==null?void 0:l.detail)||(l==null?void 0:l.message)||"è¯·æ£€æŸ¥è¯·æ±‚å‚æ•°"}`:r=`HTTPé”™è¯¯ (${c}): ${(l==null?void 0:l.detail)||(l==null?void 0:l.message)||i.message}`}else i.request?r="ç½‘ç»œè¿æ¥å¤±è´¥: æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡å™¨":r=i.message||"è¯·æ±‚é…ç½®é”™è¯¯";throw new Error(`æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€å¤±è´¥: ${r}`)}}}const Rt={class:"training-result-container"},Lt={class:"card-header"},Dt={class:"header-actions"},Bt={class:"result-content"},Vt={class:"config-section"},Jt={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},At={style:{display:"flex",gap:"10px"}},jt={class:"json-monitor-section"},Mt={class:"json-monitor-content"},Ft={class:"config-source-info",style:{"margin-bottom":"10px"}},Ht={key:0,style:{"margin-left":"8px","font-size":"12px",color:"#666"}},qt={class:"json-summary"},Kt={key:0,class:"config-file-info"},Wt={key:0,style:{"margin-bottom":"15px"}},Gt={class:"file-actions",style:{"margin-top":"10px"}},Qt={key:1},Xt={class:"file-actions",style:{"margin-top":"10px"}},Yt={key:0,class:"progress-section"},Zt={class:"status-text"},eo={key:0,class:"task-info"},to={key:1,class:"results-data-section"},oo={key:0,class:"result-stats"},so={key:1,class:"charts-section"},ao={class:"chart-container"},no={class:"chart-placeholder"},lo={class:"chart-container"},ro={class:"chart-placeholder"},io={key:2,class:"best-solution-section"},co={key:0,class:"optimal-params"},uo={key:3,class:"result-files-section"},po={class:"card-header"},mo={class:"image-actions"},go={class:"image-content"},fo={key:0,class:"no-images"},vo={key:1,class:"loading-images"},_o={key:2,class:"images-grid"},ho={class:"image-header"},yo={class:"image-title"},wo={class:"image-actions-small"},bo=["onClick"],ko=["src","alt"],$o={class:"image-overlay"},Po={class:"image-info"},Io={class:"card-header"},To={class:"image-actions"},Co={class:"image-content"},So={key:0,class:"no-images"},xo={key:1,class:"loading-images"},No={key:2,class:"images-grid"},zo={class:"image-header"},Uo={class:"image-title"},Oo={class:"image-actions-small"},Eo=["onClick"],Ro=["src","alt"],Lo={class:"image-overlay"},Do={class:"image-info"},Bo={key:0,class:"image-preview-container"},Vo=["src","alt"],Jo={class:"dialog-footer"},Ao=Tt({__name:"TrainingResultView",setup(R){const i=(()=>{const e=window.location.hostname,t=window.location.origin;return console.log("å½“å‰å‰ç«¯è¿è¡Œç¯å¢ƒ:",{hostname:e,origin:t}),e==="localhost"||e==="127.0.0.1"?["http://localhost:8111","http://vivighr.vip:8111"]:e.includes("vivighr.vip")?["http://vivighr.vip:8111","http://localhost:8111"]:["http://localhost:8111","http://vivighr.vip:8111"]})(),r=async(e,t)=>{let a;for(let n=0;n<i.length;n++){const u=i[n],v=u?`${u}${e}`:e;try{console.log(`å°è¯•APIåœ°å€ [${n+1}/${i.length}]: ${v}`);const b=await fetch(v,t);if(b.ok)return n>0&&console.log(`APIè¯·æ±‚æˆåŠŸï¼Œä½¿ç”¨åœ°å€: ${v}`),b;throw b.status>=400&&b.status<500?new Error(`HTTP ${b.status}: ${b.statusText}`):new Error(`HTTP ${b.status}: ${b.statusText}`)}catch(b){if(a=b,console.error(`APIåœ°å€ ${v} è¯·æ±‚å¤±è´¥:`,b.message),n===i.length-1)break}}throw a},c=I(0),l=I("success"),m=I("ä¼˜åŒ–å°šæœªå¼€å§‹"),z=I(!1),H=I(!1),B=I(!1),w=I(null),ae=I(null),ne=I(0),ye=I(0),we=I(5),fe=I(null),Ze=I(10*60*1e3),le=I(null),Ne=I(3e3),ve=I(0),_e=I(""),et=async()=>{try{if(!_e.value){p.warning("è¯·è¾“å…¥Pythonåç«¯URL");return}const e=await r("/api/update-python-backend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:_e.value})});if(e.ok)p.success("Pythonåç«¯URLæ›´æ–°æˆåŠŸ");else throw new Error(`æ›´æ–°å¤±è´¥: ${e.status}`)}catch(e){console.error("æ›´æ–°Pythonåç«¯URLå¤±è´¥:",e),p.error("æ›´æ–°Pythonåç«¯URLå¤±è´¥")}},_=I({outputPath:`training_${Date.now()}`,imagePath:"",cudaDevices:"0",env:"pytorch112_py311",callbackUrl:"http://vivighr.vip:8111/api/callback"}),V=I(null),ze=I([]),C=I([]),re=I(!1),ie=I(!1),Q=I(null),L=I([]),ce=I(!1),Ue=e=>({pending:"ç­‰å¾…ä¸­",running:"è¿è¡Œä¸­",completed:"å·²å®Œæˆ",failed:"å¤±è´¥"})[e]||e,tt=async()=>{try{p.info("æ­£åœ¨æµ‹è¯•åç«¯è¿æ¥...");const e=await r("/api/callback",{method:"GET"});if(e.ok){const t=await e.json();p.success("åç«¯è¿æ¥æ­£å¸¸"),console.log("åç«¯è¿æ¥æµ‹è¯•æˆåŠŸ:",t)}else p.warning(`åç«¯å“åº”å¼‚å¸¸: ${e.status} ${e.statusText}`),console.log("åç«¯å“åº”:",e.status,e.statusText)}catch(e){console.error("è¿æ¥æµ‹è¯•å¤±è´¥:",e),p.error(`è¿æ¥æµ‹è¯•å¤±è´¥: ${e.message||"ç½‘ç»œè¿æ¥é”™è¯¯"}`)}},be=()=>{try{const e=localStorage.getItem("training_complete_config");if(e){const n=JSON.parse(e);return console.log("ğŸ¯ è·å–åˆ°å®Œæ•´ä¼˜åŒ–é…ç½®:",n),n}const t={},a=["nav_dataSource","nav_globalParam","nav_inputModule","nav_modulePanel","nav_optimizeVariables","nav_optimizationTargets","nav_optimizeAlgorithm","nav_surrogate","nav_robustnessAnalysis","predictor_nav_predictor"];for(const n of a){const u=localStorage.getItem(n);if(u)try{const v=n.replace("nav_","").replace("predictor_","");t[v]=JSON.parse(u)}catch(v){console.warn(`è§£æé…ç½® ${n} å¤±è´¥:`,v)}}return console.log("ğŸ“‹ æ”¶é›†åˆ°çš„é…ç½®æ­¥éª¤:",t),t}catch(e){return console.error("è·ä¼˜åŒ–é…ç½®å¤±è´¥:",e),null}},q=()=>{try{const e=localStorage.getItem("predictor_export_config");if(e){const n=JSON.parse(e);return console.log("âœ… ä½¿ç”¨Predictoré¡µé¢å¯¼å‡ºçš„é…ç½®:",n),{form:n.data||{},timestamp:n.timestamp,stepName:"é¢„æµ‹å™¨é…ç½®ï¼ˆå¯¼å‡ºï¼‰",algorithmId:n.algorithmId,subid:n.subid,fileName:n.fileName,source:"predictor_export"}}const t=be();if(t&&t.predictor)return console.log("âœ… ä»å®Œæ•´é…ç½®ä¸­è·å–é¢„æµ‹å™¨é…ç½®:",t.predictor),{...t.predictor,source:"complete_config"};const a=["predictor_nav_predictor","predictorConfig","nav_predictor_config"];for(const n of a){const u=localStorage.getItem(n);if(u){const v=JSON.parse(u);return console.log(`âœ… ä» ${n} è·å–é¢„æµ‹å™¨é…ç½®:`,v),{...v,source:n}}}return console.warn("âš ï¸ æœªæ‰¾åˆ°é¢„æµ‹å™¨é…ç½®ï¼Œä½¿ç”¨é»˜è®¤é…ç½®"),{form:{},timestamp:new Date().toISOString(),stepName:"é¢„æµ‹å™¨é…ç½®",source:"default"}}catch(e){return console.error("è·å–é¢„æµ‹å™¨é…ç½®å¤±è´¥:",e),null}},ot=e=>({predictor_export:"âœ… Predictoré¡µé¢å¯¼å‡ºé…ç½®",complete_config:"ğŸ“‹ å®Œæ•´ä¼˜åŒ–é…ç½®",predictor_nav_predictor:"ğŸ”§ é¢„æµ‹å™¨å¯¼èˆªé…ç½®",predictorConfig:"âš™ï¸ é¢„æµ‹å™¨é…ç½®",nav_predictor_config:"ğŸ§­ å¯¼èˆªé¢„æµ‹å™¨é…ç½®",default:"âš ï¸ é»˜è®¤é…ç½®"})[e]||`ğŸ“„ ${e}`,Oe=e=>{try{return JSON.stringify(e,null,2)}catch{return"æ•°æ®æ ¼å¼é”™è¯¯"}},ke=e=>{try{const t=new Blob([JSON.stringify(e)]).size;return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/(1024*1024)).toFixed(2)} MB`}catch{return"è®¡ç®—å¤±è´¥"}},st=()=>{try{const t={predictorConfig:q()||{},taskConfig:_.value};return ke(t)}catch{return"è®¡ç®—å¤±è´¥"}},ue=()=>{try{const e=localStorage.getItem("training_config_file_info");return e?JSON.parse(e):null}catch(e){return console.error("è·å–é…ç½®æ–‡ä»¶ä¿¡æ¯å¤±è´¥:",e),null}},X=()=>{try{const e=localStorage.getItem("predictor_export_config");return e?JSON.parse(e):null}catch(e){return console.error("è·å–Predictorå¯¼å‡ºé…ç½®ä¿¡æ¯å¤±è´¥:",e),null}},at=e=>e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(2)} KB`:`${(e/(1024*1024)).toFixed(2)} MB`,Ee=e=>{try{return new Date(e).toLocaleString("zh-CN")}catch{return e}},nt=()=>{try{const e=be();if(!e){p.error("æœªæ‰¾åˆ°é…ç½®æ•°æ®");return}const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=`training_config_${new Date().toISOString().replace(/[:.]/g,"-")}.json`,u=URL.createObjectURL(t),v=document.createElement("a");v.href=u,v.download=n,v.style.display="none",document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(u),p.success(`é…ç½®æ–‡ä»¶å·²é‡æ–°ä¸‹è½½: ${n}`)}catch(e){console.error("ä¸‹è½½é…ç½®æ–‡ä»¶å¤±è´¥:",e),p.error("ä¸‹è½½é…ç½®æ–‡ä»¶å¤±è´¥")}},lt=()=>{try{const e=be();if(!e){p.error("æœªæ‰¾åˆ°é…ç½®æ•°æ®");return}const t=JSON.stringify(e,null,2),a=window.open("","_blank");a?(a.document.write(`
        <html>
          <head>
            <title>å®Œæ•´ä¼˜åŒ–é…ç½®</title>
            <style>
              body { font-family: monospace; margin: 20px; }
              pre { background: #f5f5f5; padding: 15px; border-radius: 5px; overflow: auto; }
            </style>
          </head>
          <body>
            <h1>å®Œä¼˜åŒ–é…ç½®</h1>
            <pre>${t}</pre>
          </body>
        </html>
      `),a.document.close()):navigator.clipboard.writeText(t).then(()=>{p.success("é…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(()=>{p.warning("æ— æ³•æ‰“å¼€æ–°çª—å£ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®")})}catch(e){console.error("æŸ¥çœ‹å®Œæ•´é…ç½®å¤±è´¥:",e),p.error("æŸ¥çœ‹å®Œæ•´é…ç½®å¤±è´¥")}},rt=()=>{try{const e=X();if(!e){p.error("æœªæ‰¾åˆ°Predictorå¯¼å‡ºé…ç½®æ•°æ®");return}const t=new Blob([JSON.stringify(e.data,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=e.fileName,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a),p.success(`Predictoré…ç½®æ–‡ä»¶å·²ä¸‹è½½: ${e.fileName}`)}catch(e){console.error("ä¸‹è½½Predictoré…ç½®æ–‡ä»¶å¤±è´¥:",e),p.error("ä¸‹è½½Predictoré…ç½®æ–‡ä»¶å¤±è´¥")}},it=()=>{try{const e=X();if(!e){p.error("æœªæ‰¾åˆ°Predictorå¯¼å‡ºé…ç½®æ•°æ®");return}const t=JSON.stringify(e.data,null,2),a=window.open("","_blank");a?(a.document.write(`
        <html>
          <head>
            <title>Predictorå¯¼å‡ºé…ç½®</title>
            <style>
              body { font-family: monospace; margin: 20px; }
              pre { background: #f5f5f5; padding: 15px; border-radius: 5px; overflow: auto; }
              .info { background: #e7f3ff; padding: 10px; border-radius: 5px; margin-bottom: 15px; }
            </style>
          </head>
          <body>
            <h1>Predictorå¯¼å‡ºé…ç½®</h1>
            <div class="info">
              <p><strong>æ–‡ä»¶å:</strong> ${e.fileName}</p>
              <p><strong>ç®—æ³•ID:</strong> ${e.algorithmId}</p>
              <p><strong>å­ID:</strong> ${e.subid||"æ— "}</p>
              <p><strong>å¯¼å‡ºæ—¶é—´:</strong> ${new Date(e.timestamp).toLocaleString("zh-CN")}</p>
            </div>
            <pre>${t}</pre>
          </body>
        </html>
      `),a.document.close()):navigator.clipboard.writeText(t).then(()=>{p.success("Predictoré…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(()=>{p.warning("æ— æ³•æ‰“å¼€æ–°çª—å£ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®")})}catch(e){console.error("æŸ¥çœ‹Predictoré…ç½®å¤±è´¥:",e),p.error("æŸ¥çœ‹Predictoré…ç½®å¤±è´¥")}},ct=async()=>{try{if(!_.value.outputPath.trim()){p.error("è¯·è¾“å…¥è¾“å‡ºè·¯å¾„");return}const e=q();if(!e&&await me.confirm("æœªæ‰¾åˆ°é¢„æµ‹å™¨é…ç½®æ•°æ®ï¼Œæ˜¯å¦ç»§ç»­ä½¿ç”¨é»˜è®¤é…ç½®ï¼Ÿ","æç¤º",{confirmButtonText:"ç»§ç»­",cancelButtonText:"å–æ¶ˆ",type:"warning"})!=="confirm")return;const t={predictorConfig:e||{},taskConfig:_.value,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,sessionId:Date.now().toString()};console.group("ğŸš€ä¼˜åŒ–ä»»åŠ¡æäº¤ - JSONæ•°æ®ç›‘æ§"),console.log("ğŸ“‹ å®Œæ•´JSONæ•°æ®:",JSON.stringify(t,null,2)),console.log("ğŸ”§ é¢„æµ‹å™¨é…ç½®:",e),console.log("âš™ï¸ ä»»åŠ¡é…ç½®:",_.value),console.log("ğŸ“Š æ•°æ®å¤§å°:",new Blob([JSON.stringify(t)]).size,"bytes"),console.groupEnd(),p.info({message:`æ­£åœ¨æäº¤ä¼˜åŒ–ä»»åŠ¡... æ•°æ®å¤§å°: ${new Blob([JSON.stringify(t)]).size} bytes`,duration:3e3}),H.value=!0;const a=await A.submitTask(e||{},_.value);w.value=a,z.value=!0,H.value=!1,B.value=!1,c.value=0,l.value="success",m.value="ä»»åŠ¡å·²æäº¤ï¼Œå¼€å§‹ä¼˜åŒ–...";const n={...w.value,output_path:_.value.outputPath,image_path:_.value.imagePath||_.value.outputPath};localStorage.setItem("currentTrainingTask",JSON.stringify(n)),p.success("ä¼˜åŒ–ä»»åŠ¡å·²æäº¤"),Re(),dt()}catch(e){H.value=!1,console.error("æäº¤ä¼˜åŒ–ä»»åŠ¡å¤±è´¥:",e),p.error(`æäº¤ä»»åŠ¡å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}},Re=()=>{ae.value&&clearInterval(ae.value),ne.value=0,ye.value=0,fe.value=Date.now(),console.log("[è½®è¯¢] å¼€å§‹ä»»åŠ¡çŠ¶æ€è½®è¯¢:",_.value.outputPath),ae.value=setInterval(async()=>{try{if(ye.value++,!_.value.outputPath){console.warn("è½®è¯¢åœæ­¢: ç¼ºå°‘è¾“å‡ºè·¯å¾„"),j();return}if(fe.value&&Date.now()-fe.value>Ze.value){console.warn("è½®è¯¢è¶…æ—¶ï¼Œè‡ªåŠ¨åœæ­¢"),p.warning("ä¼˜åŒ–ä»»åŠ¡è½®è¯¢è¶…æ—¶ï¼Œè¯·æ‰‹åŠ¨æ£€æŸ¥ä»»åŠ¡çŠ¶æ€"),j(),z.value=!1;return}const e=await A.getTaskStatus(_.value.outputPath);w.value=e,console.log(`[è½®è¯¢] ç¬¬${ye.value}æ¬¡è½®è¯¢ - çŠ¶æ€: ${e.status}, è¿›åº¦: ${e.progress}%, æ¶ˆæ¯: ${e.message||"æ— "}`),ne.value=0,$e(e),e.status==="completed"?ut(e):e.status==="failed"?Le(e):e.status==="processing"?console.log("æ£€æµ‹åˆ°processingçŠ¶æ€ï¼Œä»»åŠ¡æ­£åœ¨å¤„ç†ä¸­ï¼Œç»§ç»­è½®è¯¢..."):(e.status==="error"||e.status==="cancelled")&&Le(e)}catch(e){console.error("è½®è¯¢ä»»åŠ¡çŠ¶æ€å¤±è´¥:",e),ne.value++;const t=e instanceof Error?e.message:String(e);t.includes("404")?(console.warn("åç«¯æœåŠ¡å™¨æœªå®ç°ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢æ¥å£ï¼Œç»§ç»­è½®è¯¢..."),m.value="ç­‰å¾…åç«¯æœåŠ¡å™¨å“åº”...",ne.value>=we.value*2&&(console.error("åç«¯æœåŠ¡å™¨é•¿æ—¶é—´æœªå“åº”ï¼Œåœæ­¢è½®è¯¢"),p.warning("åç«¯æœåŠ¡å™¨æœªå®ç°çŠ¶æ€æŸ¥è¯¢æ¥å£ï¼Œè¯·æ‰‹åŠ¨æ£€æŸ¥ä»»åŠ¡çŠ¶æ€"),j(),z.value=!1)):(console.error("ç½‘ç»œæˆ–æœåŠ¡å™¨é”™è¯¯:",t),ne.value>=we.value&&(console.error(`è¿ç»­è½®è¯¢å¤±è´¥ ${we.value} æ¬¡ï¼Œåœæ­¢è½®è¯¢`),p.error("ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œå·²åœæ­¢ä»»åŠ¡çŠ¶æ€è½®è¯¢"),j(),z.value=!1))}},2e3)},$e=e=>{switch(e.status){case"pending":c.value=10,l.value="warning",m.value="ä»»åŠ¡ç­‰å¾…ä¸­...";break;case"running":c.value=e.progress||50,l.value="success",m.value=`ä¼˜åŒ–è¿›è¡Œä¸­... ${e.message||""}`;break;case"processing":c.value=e.progress||80,l.value="success",m.value=`æ­£åœ¨å¤„ç†ä¸­... ${e.message||""}`;break;case"completed":c.value=100,l.value="success",m.value="ä¼˜åŒ–å®Œæˆ";break;case"failed":case"error":case"cancelled":c.value=100,l.value="exception",m.value=`ä¼˜åŒ–å¤±è´¥: ${e.error||e.message||"æœªçŸ¥é”™è¯¯"}`;break;default:c.value=e.progress||30,l.value="warning",m.value=`çŠ¶æ€: ${e.status} - ${e.message||"å¤„ç†ä¸­..."}`;break}},ut=async e=>{var t;j(),he(),z.value=!1,B.value=!0,e.result&&(V.value=e.result,Pe(e.result)),p.success("ä¼˜åŒ–ä»»åŠ¡å®Œæˆ");try{(t=w.value)!=null&&t.output_path&&(console.log("ä¼˜åŒ–å®Œæˆï¼Œåˆ·æ–°å›¾ç‰‡åˆ—è¡¨..."),await Z(),await ee(),p.success("ä¼˜åŒ–å®Œæˆï¼Œå›¾ç‰‡åˆ—è¡¨å·²æ›´æ–°"))}catch(a){console.error("åˆ·æ–°å›¾ç‰‡åˆ—è¡¨å¤±è´¥:",a),p.warning("ä¼˜åŒ–å®Œæˆï¼Œä½†åˆ·æ–°å›¾ç‰‡åˆ—è¡¨å¤±è´¥")}},Le=e=>{j(),he(),z.value=!1,p.error(`ä¼˜åŒ–ä»»åŠ¡å¤±è´¥: ${e.error||"æœªçŸ¥é”™è¯¯"}`)},j=()=>{ae.value&&(clearInterval(ae.value),ae.value=null)},dt=()=>{le.value&&clearInterval(le.value),ve.value=C.value.length,console.log("å¼€å§‹å›¾ç‰‡æ›´æ–°æ£€æŸ¥è½®è¯¢ï¼Œé—´éš”:",Ne.value,"ms","å½“å‰å›¾ç‰‡æ•°é‡:",ve.value),le.value=setInterval(async()=>{var e,t,a,n;try{if(z.value&&(((e=w.value)==null?void 0:e.status)==="running"||((t=w.value)==null?void 0:t.status)==="pending"||((a=w.value)==null?void 0:a.status)==="processing")){console.log("æ£€æŸ¥å›¾ç‰‡æ›´æ–°ï¼Œå½“å‰ä»»åŠ¡çŠ¶æ€:",(n=w.value)==null?void 0:n.status);const u=ve.value;if(await Z(),await ee(),C.value.length>u){const v=C.value.length-u;console.log(`æ£€æµ‹åˆ° ${v} å¼ æ–°å›¾ç‰‡`),p.success(`ğŸ–¼ï¸ æ£€æµ‹åˆ° ${v} å¼ æ–°çš„ä¼˜åŒ–ç»“æœå›¾ç‰‡`)}ve.value=C.value.length}}catch(u){console.error("å›¾ç‰‡æ›´æ–°æ£€æŸ¥å¤±è´¥:",u)}},Ne.value)},he=()=>{le.value&&(clearInterval(le.value),le.value=null,console.log("å·²åœæ­¢å›¾ç‰‡æ›´æ–°æ£€æŸ¥è½®è¯¢"))},pt=async()=>{try{if(await me.confirm("ç¡®å®šè¦åœæ­¢ä¼˜åŒ–ä»»åŠ¡å—ï¼Ÿè¿™å°†åœæ­¢è½®è¯¢å¹¶å°†ä»»åŠ¡çŠ¶æ€è®¾ç½®ä¸ºå®Œæˆã€‚","åœæ­¢ä¼˜åŒ–ç¡®è®¤",{confirmButtonText:"ç¡®å®šåœæ­¢",cancelButtonText:"å–æ¶ˆ",type:"warning"})==="confirm"){if(j(),he(),z.value=!1,ne.value=0,fe.value=null,w.value){w.value.status="completed",w.value.progress=100,w.value.message="ç”¨æˆ·æ‰‹åŠ¨åœæ­¢ï¼Œä»»åŠ¡æ ‡è®°ä¸ºå®Œæˆ",$e(w.value),B.value=!0;try{await Z(),await ee(),p.success("ä¼˜åŒ–å·²åœæ­¢ï¼Œä»»åŠ¡çŠ¶æ€å·²è®¾ç½®ä¸ºå®Œæˆ")}catch(t){console.error("åˆ·æ–°å›¾ç‰‡åˆ—è¡¨å¤±è´¥:",t),p.success("ä¼˜åŒ–å·²åœæ­¢ï¼Œä»»åŠ¡çŠ¶æ€å·²è®¾ç½®ä¸ºå®Œæˆï¼ˆå›¾ç‰‡åˆ·æ–°å¤±è´¥ï¼‰")}}else p.success("å·²åœæ­¢ä»»åŠ¡çŠ¶æ€è½®è¯¢");console.log("ç”¨æˆ·æ‰‹åŠ¨åœæ­¢äº†ä¼˜åŒ–ï¼Œä»»åŠ¡çŠ¶æ€å·²è®¾ç½®ä¸ºå®Œæˆ")}}catch{console.log("ç”¨æˆ·å–æ¶ˆäº†åœæ­¢è½®è¯¢æ“ä½œ")}},Pe=e=>{try{Z(),ee()}catch(t){console.error("å¤„ç†ä¼˜åŒ–ç»“æœå¤±è´¥:",t)}},Y=()=>{var a,n;const e=(a=_.value.imagePath)==null?void 0:a.trim(),t=(n=_.value.outputPath)==null?void 0:n.trim();return e||t||"default"},De=async(e,t)=>{try{const a=t||Y();return await A.getImagePreviewUrl(a,e)}catch(a){return console.error("è·å–å›¾ç‰‡é¢„è§ˆURLå¤±è´¥:",a),""}},Z=async()=>{const e=C.value.length===0;try{e&&(re.value=!0);const t=Y();console.log("è·å–å›¾ç‰‡åˆ—è¡¨ï¼Œå®é™…è·¯å¾„:",t);const a=await A.getImageList(t+"/optimizer_state");console.log("åç«¯è¿”å›çš„å›¾ç‰‡åˆ—è¡¨:",a,"ç±»å‹:",typeof a,"æ˜¯å¦ä¸ºæ•°ç»„:",Array.isArray(a));const u=(Array.isArray(a)?typeof a[0]=="string"?a:a.map(f=>f.name||f.path||f):[]).map(f=>{const S=typeof f=="string"?f:f.name||f.path||String(f),O=S.match(/image_(\d{8})_(\d{6})_\d+\.png/);let h=Date.now();if(O){const[,U,J]=O,te=U.substring(0,4),oe=U.substring(4,6),K=U.substring(6,8),W=J.substring(0,2),se=J.substring(2,4),de=J.substring(4,6);h=new Date(`${te}-${oe}-${K}T${W}:${se}:${de}`).getTime()}return{name:S,url:"",size:0,lastModified:h}}),v=C.value.map(f=>f.name).sort(),b=u.map(f=>f.name).sort();if(JSON.stringify(v)!==JSON.stringify(b)||C.value.length===0){C.value=u.sort((f,S)=>S.lastModified-f.lastModified),console.log("å›¾ç‰‡åˆ—è¡¨å·²æ›´æ–°:",u.length,"å¼ å›¾ç‰‡");for(const f of C.value)try{f.url=await De(f.name,t+"/optimizer_state")}catch(S){console.error(`åŠ è½½å›¾ç‰‡URLå¤±è´¥: ${f.name}`,S)}}else console.log("å›¾ç‰‡åˆ—è¡¨æ— å˜åŒ–ï¼Œè·³è¿‡æ›´æ–°")}catch(t){console.error("è·å–å›¾ç‰‡åˆ—è¡¨å¤±è´¥:",t),await mt()}finally{e&&(re.value=!1)}},mt=async()=>{try{const e=await r("/local-images",{method:"POST"});if(e.ok){const t=await e.json();if(t.success&&t.images){const a=t.images.map(n=>{const u=typeof n=="string"?n:String(n),v=u.match(/image_(\d{8})_(\d{6})_\d+\.png/);let b=Date.now();if(v){const[,f,S]=v,O=f.substring(0,4),h=f.substring(4,6),U=f.substring(6,8),J=S.substring(0,2),te=S.substring(2,4),oe=S.substring(4,6);b=new Date(`${O}-${h}-${U}T${J}:${te}:${oe}`).getTime()}return{name:u,url:(f=>`${"http://vivighr.vip:8111/api".replace(/\/api$/,"")}/uploads/${f}`)(u),size:0,lastModified:b}});C.value=a.sort((n,u)=>u.lastModified-n.lastModified);return}}}catch(e){console.warn("æ— æ³•é€šè¿‡APIè·å–æœ¬åœ°å›¾ç‰‡åˆ—è¡¨:",e)}C.value=[],console.log("æœ¬åœ°å›¾ç‰‡åˆ—è¡¨å·²æ¸…ç©º")},Be=e=>{Q.value=e,ie.value=!0},Ie=async e=>{if(e)try{const t=Y(),a=await A.downloadImage(t+"/optimizer_state",e.name),n=URL.createObjectURL(a),u=document.createElement("a");u.href=n,u.download=e.name,u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(n),p.success(`å›¾ç‰‡ ${e.name} ä¸‹è½½æˆåŠŸ`)}catch(t){console.error("ä¸‹è½½å›¾ç‰‡å¤±è´¥:",t),p.error("å›¾ç‰‡ä¸‹è½½å¤±è´¥")}},gt=async()=>{if(C.value.length===0){p.warning("æ²¡æœ‰å¯ä¸‹è½½çš„å›¾ç‰‡");return}try{p.info("å¼€å§‹ä¸‹è½½æ‰€æœ‰å›¾ç‰‡...");for(const e of C.value)await Ie(e),await new Promise(t=>setTimeout(t,500));p.success(`æ‰€æœ‰å›¾ç‰‡ä¸‹è½½å®Œæˆ (${C.value.length} å¼ )`)}catch(e){console.error("æ‰¹é‡ä¸‹è½½å›¾ç‰‡å¤±è´¥:",e),p.error("æ‰¹é‡ä¸‹è½½å¤±è´¥")}},Ve=e=>{const t=e.match(/image_(\d{8})_(\d{6})_\d+\.png/);if(t){const[,a,n]=t,u=a.slice(0,4),v=a.slice(4,6),b=a.slice(6,8),M=n.slice(0,2),f=n.slice(2,4),S=n.slice(4,6);return`ä¼˜åŒ–ç»“æœ ${u}-${v}-${b} ${M}:${f}:${S}`}return e},Te=e=>e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(2)} KB`:`${(e/(1024*1024)).toFixed(2)} MB`,ee=async()=>{const e=L.value.length===0;try{e&&(ce.value=!0);const t=Y();console.log("è·å–æ¯ä»£æœ€ä¼˜ç»“æ„å›¾åˆ—è¡¨ï¼Œå®é™…è·¯å¾„:",t);const a=await A.getImageList(t+"/best_generation_optimal");console.log("åç«¯è¿”å›çš„æ¯ä»£æœ€ä¼˜ç»“æ„å›¾åˆ—è¡¨:",a);const u=(Array.isArray(a)?typeof a[0]=="string"?a:a.map(f=>f.name||f.path||f):[]).map(f=>{const S=typeof f=="string"?f:f.name||f.path||String(f),O=S.match(/(\d{8})_(\d{6})/);let h=Date.now();if(O){const[,U,J]=O,te=U.substring(0,4),oe=U.substring(4,6),K=U.substring(6,8),W=J.substring(0,2),se=J.substring(2,4),de=J.substring(4,6);h=new Date(`${te}-${oe}-${K}T${W}:${se}:${de}`).getTime()}return{name:S,url:"",size:0,lastModified:h}}),v=L.value.map(f=>f.name).sort(),b=u.map(f=>f.name).sort();if(JSON.stringify(v)!==JSON.stringify(b)||L.value.length===0){L.value=u.sort((f,S)=>S.lastModified-f.lastModified),console.log("æ¯ä»£æœ€ä¼˜ç»“æ„å›¾åˆ—è¡¨å·²æ›´æ–°:",u.length,"å¼ å›¾ç‰‡");for(const f of L.value)try{f.url=await De(f.name,t+"/best_generation_optimal")}catch(S){console.error(`åŠ è½½æ¯ä»£æœ€ä¼˜ç»“æ„å›¾URLå¤±è´¥: ${f.name}`,S)}}}catch(t){console.error("è·å–æ¯ä»£æœ€ä¼˜ç»“æ„å›¾åˆ—è¡¨å¤±è´¥:",t),L.value=[]}finally{e&&(ce.value=!1)}},Je=e=>{Q.value=e,ie.value=!0},Ae=async e=>{if(e)try{const t=Y(),a=await A.downloadImage(t+"/best_generation_optimal",e.name),n=URL.createObjectURL(a),u=document.createElement("a");u.href=n,u.download=e.name,u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(n),p.success(`æ¯ä»£æœ€ä¼˜ç»“æ„å›¾ ${e.name} ä¸‹è½½æˆåŠŸ`)}catch(t){console.error("ä¸‹è½½æ¯ä»£æœ€ä¼˜ç»“æ„å›¾å¤±è´¥:",t),p.error("æ¯ä»£æœ€ä¼˜ç»“æ„å›¾ä¸‹è½½å¤±è´¥")}},ft=async()=>{if(L.value.length===0){p.warning("æ²¡æœ‰å¯ä¸‹è½½çš„æ¯ä»£æœ€ä¼˜ç»“æ„å›¾");return}try{p.info("å¼€å§‹ä¸‹è½½æ‰€æœ‰æ¯ä»£æœ€ä¼˜ç»“æ„å›¾...");for(const e of L.value)await Ae(e),await new Promise(t=>setTimeout(t,500));p.success(`æ‰€æœ‰æ¯ä»£æœ€ä¼˜ç»“æ„å›¾ä¸‹è½½å®Œæˆ (${L.value.length} å¼ )`)}catch(e){console.error("æ‰¹é‡ä¸‹è½½æ¯ä»£æœ€ä¼˜ç»“æ„å›¾å¤±è´¥:",e),p.error("æ‰¹é‡ä¸‹è½½å¤±è´¥")}},vt=async()=>{try{if(await me.confirm("ç¡®å®šè¦æ¸…ç†æ‰€æœ‰æ¯ä»£æœ€ä¼˜ç»“æ„å›¾å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","ç¡®è®¤æ¸…ç†",{confirmButtonText:"ç¡®å®šæ¸…ç†",cancelButtonText:"å–æ¶ˆ",type:"warning"})==="confirm"){const t=Y();if(t&&t!=="default"){const a=await A.cleanupImages(t+"/best_generation_optimal");if(a.success)console.log("æ¯ä»£æœ€ä¼˜ç»“æ„å›¾æ¸…ç†å®Œæˆ:",a.message),L.value=[],p.success("æ¯ä»£æœ€ä¼˜ç»“æ„å›¾æ¸…ç†å®Œæˆ");else throw new Error(`æ¸…ç†æ¯ä»£æœ€ä¼˜ç»“æ„å›¾å¤±è´¥: ${a.message}`)}}}catch(e){e!=="cancel"&&(console.error("æ¸…ç†æ¯ä»£æœ€ä¼˜ç»“æ„å›¾å¤±è´¥:",e),p.error("æ¸…ç†æ¯ä»£æœ€ä¼˜ç»“æ„å›¾å¤±è´¥"))}},Ce=e=>{const t=e.match(/image_(\d{8})_(\d{6})_\d+\.png/);if(t){const[,a,n]=t,u=a.slice(0,4),v=a.slice(4,6),b=a.slice(6,8),M=n.slice(0,2),f=n.slice(2,4),S=n.slice(4,6);return`${u}-${v}-${b} ${M}:${f}:${S}`}return"æœªçŸ¥æ—¶é—´"},_t=()=>{var e;if(!((e=w.value)!=null&&e.start_time))return"0";try{const t=new Date(w.value.start_time).getTime(),n=(w.value.status==="completed"&&w.value.end_time?new Date(w.value.end_time).getTime():Date.now())-t;return Math.floor(n/(1e3*60)).toString()}catch(t){return console.error("è®¡ç®—ä»»åŠ¡æŒç»­æ—¶é—´å¤±è´¥:",t),"0"}},ht=e=>!e||typeof e!="object"?[]:Object.entries(e).map(([t,a])=>({name:t,value:typeof a=="number"?a.toFixed(4):String(a),unit:yt(t)})),yt=e=>{const t={frequency:"Hz",amplitude:"V",phase:"Â°",power:"W",current:"A",voltage:"V",resistance:"Î©",capacitance:"F",inductance:"H"},a=e.toLowerCase();for(const[n,u]of Object.entries(t))if(a.includes(n))return u;return"-"},wt=()=>{if(C.value.length===0)return"æ— ";const e=C.value[0];return Ce(e.name)},bt=()=>{if(C.value.length===0)return"0 B";const e=C.value.reduce((t,a)=>t+(a.size||0),0);return Te(e)},je=()=>{},Me=e=>{const t=e.target;console.warn("å›¾ç‰‡åŠ è½½å¤±è´¥:",t.src)},kt=async()=>{try{if(!_.value.outputPath||!z.value)return;const e=await A.getTaskStatus(_.value.outputPath);w.value=e,$e(e),e.status==="completed"&&e.result&&Pe(e.result)}catch(e){console.error("è·å–ä¼˜åŒ–ç»“æœå¤±è´¥:",e),p.error("åˆ·æ–°ç»“æœå¤±è´¥")}};Ct(()=>{const e=localStorage.getItem("currentTrainingTask");if(e)try{const t=JSON.parse(e);w.value=t,_.value.outputPath=t.output_path||_.value.outputPath,_.value.imagePath=t.image_path||t.output_path||_.value.outputPath,t.status==="running"||t.status==="pending"?(z.value=!0,Re()):t.status==="completed"&&(B.value=!0,t.result&&Pe(t.result))}catch(t){console.error("æ¢å¤ä»»åŠ¡çŠ¶æ€å¤±è´¥:",t)}Z(),ee()});const $t=()=>{z.value=!1,B.value=!1,w.value=null,c.value=0,l.value="success",m.value="ä¼˜åŒ–å°šæœªå¼€å§‹",V.value=null,j(),localStorage.removeItem("currentTrainingTask"),p.success("å·²é‡ç½®ä¼˜åŒ–çŠ¶æ€ï¼Œå¯ä»¥é‡æ–°é…ç½®")},Pt=async()=>{try{const{value:e}=await me.prompt(`è¯·é€‰æ‹©æ¸…ç†ç±»å‹ï¼š
- backend: æ¸…ç†åç«¯ä¼˜åŒ–ç»“æœå›¾ç‰‡
- local: æ¸…ç†æœ¬åœ°uploadsç›®å½•å›¾ç‰‡
- all: æ¸…ç†æ‰€æœ‰å›¾ç‰‡`,"é€‰æ‹©æ¸…ç†ç±»å‹",{confirmButtonText:"ç¡®å®šæ¸…ç†",cancelButtonText:"å–æ¶ˆ",inputPlaceholder:"è¾“å…¥: backend, local æˆ– all",inputValue:"local",inputValidator:a=>["backend","local","all"].includes(a)?!0:"è¯·è¾“å…¥æœ‰æ•ˆçš„æ¸…ç†ç±»å‹: backend, local æˆ– all"});if(await me.confirm(`ç¡®å®šè¦æ¸…ç†${e==="backend"?"åç«¯":e==="local"?"æœ¬åœ°":"æ‰€æœ‰"}ä¼˜åŒ–ç»“æœå›¾ç‰‡å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,"ç¡®è®¤æ¸…ç†",{confirmButtonText:"ç¡®å®šæ¸…ç†",cancelButtonText:"å–æ¶ˆ",type:"warning"})==="confirm"){if(e==="backend"||e==="all"){const a=Y();if(a&&a!=="default"){const n=await A.cleanupImages(a+"/optimizer_state");if(n.success)console.log("åç«¯å›¾ç‰‡æ¸…ç†å®Œæˆ:",n.message);else throw new Error(`æ¸…ç†åç«¯å›¾ç‰‡å¤±è´¥: ${n.message}`)}}if(e==="local"||e==="all"){const a=C.value.map(u=>u.name),n=await r("/api/cleanup-local-images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileNames:a})});if(n.ok)console.log("æœ¬åœ°å›¾ç‰‡æ¸…ç†å®Œæˆ");else throw new Error(`æ¸…ç†æœ¬åœ°å›¾ç‰‡å¤±è´¥: ${n.status}`)}C.value=[],p.success(`${e==="backend"?"åç«¯":e==="local"?"æœ¬åœ°":"æ‰€æœ‰"}å›¾ç‰‡æ¸…ç†å®Œæˆ`)}}catch(e){e!=="cancel"&&(console.error("æ¸…ç†å›¾ç‰‡å¤±è´¥:",e),p.error("æ¸…ç†å›¾ç‰‡å¤±è´¥"))}};return St(()=>{j(),he(),w.value&&localStorage.setItem("currentTrainingTask",JSON.stringify(w.value))}),(e,t)=>{var qe;const a=N("el-button"),n=N("el-input"),u=N("el-form-item"),v=N("el-col"),b=N("el-row"),M=N("el-option"),f=N("el-select"),S=N("el-form"),O=N("el-tag"),h=N("el-descriptions-item"),U=N("el-descriptions"),J=N("el-collapse-item"),te=N("el-collapse"),oe=N("el-progress"),K=N("el-statistic"),W=N("el-empty"),se=N("el-table-column"),de=N("el-table"),pe=N("el-card"),Fe=N("el-skeleton"),He=N("el-icon"),It=N("el-dialog");return T(),x("div",Rt,[o(pe,{class:"result-card"},{header:s(()=>[d("div",Lt,[t[13]||(t[13]=d("span",null,"ä¼˜åŒ–ç»“æœå±•ç¤º",-1)),d("div",Dt,[o(a,{onClick:tt,type:"info",size:"small"},{default:s(()=>t[10]||(t[10]=[g("æµ‹è¯•è¿æ¥")])),_:1}),o(a,{onClick:ct,loading:H.value,disabled:z.value},{default:s(()=>[g(y(z.value?"ä¼˜åŒ–ä¸­...":"å¼€å§‹ä¼˜åŒ–"),1)]),_:1},8,["loading","disabled"]),z.value?(T(),We(a,{key:0,onClick:pt,type:"warning",size:"small",disabled:H.value},{default:s(()=>t[11]||(t[11]=[g(" åœæ­¢ä¼˜åŒ– ")])),_:1},8,["disabled"])):E("",!0),o(a,{type:"primary",onClick:kt,disabled:z.value},{default:s(()=>t[12]||(t[12]=[g("åˆ·æ–°ç»“æœ")])),_:1},8,["disabled"])])])]),default:s(()=>{var $;return[d("div",Bt,[d("div",Vt,[d("div",Jt,[t[15]||(t[15]=d("h3",null,"ğŸ¯ä¼˜åŒ–é…ç½®",-1)),B.value?(T(),We(a,{key:0,type:"primary",size:"small",onClick:$t},{default:s(()=>t[14]||(t[14]=[g(" é‡æ–°é…ç½® ")])),_:1})):E("",!0)]),o(S,{model:_.value,"label-width":"120px"},{default:s(()=>[o(b,{gutter:20},{default:s(()=>[o(v,{span:12},{default:s(()=>[o(u,{label:"è¾“å‡ºè·¯å¾„"},{default:s(()=>[o(n,{modelValue:_.value.outputPath,"onUpdate:modelValue":t[0]||(t[0]=k=>_.value.outputPath=k),placeholder:"è¯·è¾“å…¥è¾“å‡ºè·¯å¾„"},null,8,["modelValue"])]),_:1})]),_:1}),o(v,{span:12},{default:s(()=>[o(u,{label:"å›¾ç‰‡è·¯å¾„"},{default:s(()=>[o(n,{modelValue:_.value.imagePath,"onUpdate:modelValue":t[1]||(t[1]=k=>_.value.imagePath=k),placeholder:"å¯é€‰ï¼Œé»˜è®¤ä¸è¾“å‡ºè·¯å¾„ç›¸åŒ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(b,{gutter:20},{default:s(()=>[o(v,{span:12},{default:s(()=>[o(u,{label:"CUDAè®¾å¤‡"},{default:s(()=>[o(n,{modelValue:_.value.cudaDevices,"onUpdate:modelValue":t[2]||(t[2]=k=>_.value.cudaDevices=k),placeholder:"é»˜è®¤: 0"},null,8,["modelValue"])]),_:1})]),_:1}),o(v,{span:12},{default:s(()=>[o(u,{label:"ç¯å¢ƒ"},{default:s(()=>[o(f,{modelValue:_.value.env,"onUpdate:modelValue":t[3]||(t[3]=k=>_.value.env=k),placeholder:"é€‰æ‹©ç¯å¢ƒ"},{default:s(()=>[o(M,{label:"pytorch112_py311",value:"pytorch112_py311"}),o(M,{label:"tensorflow_py39",value:"tensorflow_py39"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(b,{gutter:20},{default:s(()=>[o(v,{span:12},{default:s(()=>[o(u,{label:"å›è°ƒURL"},{default:s(()=>[o(n,{modelValue:_.value.callbackUrl,"onUpdate:modelValue":t[4]||(t[4]=k=>_.value.callbackUrl=k),placeholder:"å¯é€‰"},null,8,["modelValue"])]),_:1})]),_:1}),o(v,{span:12})]),_:1}),o(b,{gutter:20},{default:s(()=>[o(v,{span:24},{default:s(()=>[o(u,{label:"Pythonåç«¯URL"},{default:s(()=>[d("div",At,[o(n,{modelValue:_e.value,"onUpdate:modelValue":t[5]||(t[5]=k=>_e.value=k),placeholder:"è¯·è¾“å…¥Pythonåç«¯URLï¼Œä¾‹å¦‚ï¼šhttp://localhost:7000"},null,8,["modelValue"]),o(a,{type:"primary",onClick:et},{default:s(()=>t[16]||(t[16]=[g("æ›´æ–°åç«¯")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),d("div",jt,[o(te,{modelValue:ze.value,"onUpdate:modelValue":t[6]||(t[6]=k=>ze.value=k)},{default:s(()=>[o(J,{title:"ğŸ“Š JSONæ•°æ®ç›‘æ§ - æŸ¥çœ‹å°†è¦å‘é€ç»™åç«¯çš„æ•°æ®",name:"jsonMonitor"},{default:s(()=>[d("div",Mt,[o(b,{gutter:20},{default:s(()=>[o(v,{span:12},{default:s(()=>{var k,G;return[t[17]||(t[17]=d("h4",null,"ğŸ”§ é¢„æµ‹å™¨é…ç½®",-1)),d("div",Ft,[o(O,{type:((k=q())==null?void 0:k.source)==="predictor_export"?"success":"info",size:"small"},{default:s(()=>{var Ke;return[g(y(ot((Ke=q())==null?void 0:Ke.source)),1)]}),_:1},8,["type"]),(G=q())!=null&&G.fileName?(T(),x("span",Ht," æ–‡ä»¶: "+y(q().fileName),1)):E("",!0)]),o(n,{type:"textarea",rows:8,value:Oe(q()),readonly:"",class:"json-display"},null,8,["value"])]}),_:1}),o(v,{span:12},{default:s(()=>[t[18]||(t[18]=d("h4",null,"âš™ï¸ ä»»åŠ¡é…ç½®",-1)),o(n,{type:"textarea",rows:8,value:Oe(_.value),readonly:"",class:"json-display"},null,8,["value"])]),_:1})]),_:1}),d("div",qt,[o(O,{type:"info"},{default:s(()=>[g("é¢„æµ‹å™¨é…ç½®å¤§å°: "+y(ke(q())),1)]),_:1}),o(O,{type:"success"},{default:s(()=>[g("ä»»åŠ¡é…ç½®å¤§å°: "+y(ke(_.value)),1)]),_:1}),o(O,{type:"warning"},{default:s(()=>[g("æ€»æ•°æ®å¤§å°: "+y(st()),1)]),_:1})]),ue()||X()?(T(),x("div",Kt,[t[27]||(t[27]=d("h4",null,"ğŸ“ å·²ä¿å­˜çš„é…ç½®æ–‡ä»¶",-1)),ue()?(T(),x("div",Wt,[t[22]||(t[22]=d("h5",null,"ğŸ“‹ å®Œæ•´ä¼˜åŒ–é…ç½®æ–‡ä»¶",-1)),o(U,{column:2,size:"small",border:""},{default:s(()=>[o(h,{label:"æ–‡ä»¶å"},{default:s(()=>[g(y(ue().fileName),1)]),_:1}),o(h,{label:"æ–‡ä»¶å¤§å°"},{default:s(()=>[g(y(at(ue().size)),1)]),_:1}),o(h,{label:"ä¿å­˜æ—¶é—´"},{default:s(()=>[g(y(Ee(ue().timestamp)),1)]),_:1}),o(h,{label:"çŠ¶æ€"},{default:s(()=>[o(O,{type:"success",size:"small"},{default:s(()=>t[19]||(t[19]=[g("å·²ä¿å­˜åˆ°æœ¬åœ°")])),_:1})]),_:1})]),_:1}),d("div",Gt,[o(a,{size:"small",type:"primary",onClick:nt},{default:s(()=>t[20]||(t[20]=[g("é‡æ–°ä¸‹è½½å®Œæ•´é…ç½®")])),_:1}),o(a,{size:"small",type:"info",onClick:lt},{default:s(()=>t[21]||(t[21]=[g("æŸ¥çœ‹å®Œæ•´é…ç½®")])),_:1})])])):E("",!0),X()?(T(),x("div",Qt,[t[26]||(t[26]=d("h5",null,"ğŸ”§ Predictorå¯¼å‡ºé…ç½®æ–‡ä»¶",-1)),o(U,{column:2,size:"small",border:""},{default:s(()=>[o(h,{label:"æ–‡ä»¶å"},{default:s(()=>[g(y(X().fileName),1)]),_:1}),o(h,{label:"ç®—æ³•ID"},{default:s(()=>[g(y(X().algorithmId),1)]),_:1}),o(h,{label:"ä¿å­˜æ—¶é—´"},{default:s(()=>[g(y(Ee(X().timestamp)),1)]),_:1}),o(h,{label:"çŠ¶æ€"},{default:s(()=>[o(O,{type:"success",size:"small"},{default:s(()=>t[23]||(t[23]=[g("å·²ä¿å­˜åˆ°å‰ç«¯")])),_:1})]),_:1})]),_:1}),d("div",Xt,[o(a,{size:"small",type:"success",onClick:rt},{default:s(()=>t[24]||(t[24]=[g("ä¸‹è½½Predictoré…ç½®")])),_:1}),o(a,{size:"small",type:"info",onClick:it},{default:s(()=>t[25]||(t[25]=[g("æŸ¥çœ‹Predictoré…ç½®")])),_:1})])])):E("",!0)])):E("",!0)])]),_:1})]),_:1},8,["modelValue"])])]),z.value||B.value?(T(),x("div",Yt,[t[28]||(t[28]=d("h3",null,"ä¼˜åŒ–è¿›åº¦",-1)),o(oe,{percentage:c.value,status:l.value},null,8,["percentage","status"]),d("div",Zt,y(m.value),1),w.value?(T(),x("div",eo,[o(U,{column:2,size:"small"},{default:s(()=>[o(h,{label:"ä»»åŠ¡ID"},{default:s(()=>[g(y(w.value.task_id),1)]),_:1}),o(h,{label:"å¼€å§‹æ—¶é—´"},{default:s(()=>[g(y(w.value.start_time||"--"),1)]),_:1}),o(h,{label:"çŠ¶æ€"},{default:s(()=>[g(y(Ue(w.value.status)),1)]),_:1}),o(h,{label:"è¾“å‡ºè·¯å¾„"},{default:s(()=>[g(y(w.value.output_path||_.value.outputPath),1)]),_:1})]),_:1})])):E("",!0)])):E("",!0),B.value||V.value?(T(),x("div",to,[t[34]||(t[34]=d("h3",null,"ğŸ“Š ä¼˜åŒ–ç»“æœæ•°æ®",-1)),w.value?(T(),x("div",oo,[o(b,{gutter:16},{default:s(()=>[o(v,{span:6},{default:s(()=>[o(K,{title:"ä»»åŠ¡çŠ¶æ€",value:Ue(w.value.status)},null,8,["value"])]),_:1}),o(v,{span:6},{default:s(()=>[o(K,{title:"è¿è¡Œæ—¶é•¿",value:_t(),suffix:"åˆ†é’Ÿ"},null,8,["value"])]),_:1}),o(v,{span:6},{default:s(()=>[o(K,{title:"è¾“å‡ºè·¯å¾„",value:w.value.output_path||"æœªè®¾ç½®"},null,8,["value"])]),_:1}),o(v,{span:6},{default:s(()=>[o(K,{title:"ç»“æœæ–‡ä»¶",value:C.value.length,suffix:"ä¸ª"},null,8,["value"])]),_:1})]),_:1})])):E("",!0),V.value?(T(),x("div",so,[o(b,{gutter:20},{default:s(()=>[o(v,{span:12},{default:s(()=>[d("div",ao,[t[29]||(t[29]=d("h4",null,"ğŸ”„ ä¼˜åŒ–æ”¶æ•›æ›²çº¿",-1)),d("div",no,[o(W,{description:"å›¾è¡¨æ•°æ®å‡†å¤‡ä¸­","image-size":80})])])]),_:1}),o(v,{span:12},{default:s(()=>[d("div",lo,[t[30]||(t[30]=d("h4",null,"ğŸ“ˆ å‚æ•°å˜åŒ–è¶‹åŠ¿",-1)),d("div",ro,[o(W,{description:"å›¾è¡¨æ•°æ®å‡†å¤‡ä¸­","image-size":80})])])]),_:1})]),_:1})])):E("",!0),V.value?(T(),x("div",io,[t[32]||(t[32]=d("h4",null,"ğŸ¯ æœ€ä½³è§£å†³æ–¹æ¡ˆ",-1)),o(U,{column:2,border:""},{default:s(()=>[o(h,{label:"æœ€ä¼˜å€¼"},{default:s(()=>{var k;return[g(y(((k=V.value)==null?void 0:k.best_value)||"è®¡ç®—ä¸­..."),1)]}),_:1}),o(h,{label:"è¿­ä»£æ¬¡æ•°"},{default:s(()=>{var k;return[g(y(((k=V.value)==null?void 0:k.iterations)||"è®¡ç®—ä¸­..."),1)]}),_:1}),o(h,{label:"æ”¶æ•›çŠ¶æ€"},{default:s(()=>{var k;return[g(y((k=V.value)!=null&&k.converged?"å·²æ”¶æ•›":"æœªæ”¶æ•›"),1)]}),_:1}),o(h,{label:"è®¡ç®—æ—¶é—´"},{default:s(()=>{var k;return[g(y(((k=V.value)==null?void 0:k.computation_time)||"è®¡ç®—ä¸­..."),1)]}),_:1})]),_:1}),($=V.value)!=null&&$.optimal_params?(T(),x("div",co,[t[31]||(t[31]=d("h5",null,"æœ€ä¼˜å‚æ•°é…ç½®",-1)),o(de,{data:ht(V.value.optimal_params),size:"small",border:""},{default:s(()=>[o(se,{prop:"name",label:"å‚æ•°åç§°",width:"200"}),o(se,{prop:"value",label:"æœ€ä¼˜å€¼"}),o(se,{prop:"unit",label:"å•ä½",width:"100"})]),_:1},8,["data"])])):E("",!0)])):E("",!0),B.value?(T(),x("div",uo,[t[33]||(t[33]=d("h4",null,"ğŸ“ ç»“æœæ–‡ä»¶ä¿¡æ¯",-1)),o(U,{column:3,size:"small",border:""},{default:s(()=>[o(h,{label:"å›¾ç‰‡æ•°é‡"},{default:s(()=>[g(y(C.value.length)+" ä¸ª",1)]),_:1}),o(h,{label:"æœ€æ–°å›¾ç‰‡"},{default:s(()=>[g(y(wt()),1)]),_:1}),o(h,{label:"æ€»æ–‡ä»¶å¤§å°"},{default:s(()=>[g(y(bt()),1)]),_:1})]),_:1})])):E("",!0)])):E("",!0)])]}),_:1}),o(pe,{class:"image-card-container"},{header:s(()=>[d("div",po,[t[38]||(t[38]=d("span",null,"ğŸ–¼ï¸ ä¼˜åŒ–ç»“æœå›¾ç‰‡",-1)),d("div",mo,[o(a,{type:"primary",size:"small",onClick:Z,loading:re.value},{default:s(()=>t[35]||(t[35]=[g(" åˆ·æ–°å›¾ç‰‡ ")])),_:1},8,["loading"]),o(a,{type:"success",size:"small",onClick:gt,disabled:C.value.length===0},{default:s(()=>t[36]||(t[36]=[g(" ä¸‹è½½å…¨éƒ¨ ")])),_:1},8,["disabled"]),o(a,{type:"danger",size:"small",onClick:Pt,disabled:!_.value.imagePath},{default:s(()=>t[37]||(t[37]=[g(" æ¸…ç†å›¾ç‰‡ ")])),_:1},8,["disabled"])])])]),default:s(()=>[d("div",go,[C.value.length===0&&!re.value?(T(),x("div",fo,[o(W,{description:"æš‚æ— ä¼˜åŒ–ç»“æœå›¾ç‰‡"},{description:s(()=>[t[40]||(t[40]=d("p",null,"ä¼˜åŒ–å®Œæˆåï¼Œç»“æœå›¾ç‰‡å°†åœ¨æ­¤å¤„æ˜¾ç¤º",-1)),o(a,{type:"primary",onClick:Z},{default:s(()=>t[39]||(t[39]=[g("åˆ·æ–°å›¾ç‰‡")])),_:1})]),_:1})])):re.value?(T(),x("div",vo,[o(Fe,{rows:3,animated:""})])):(T(),x("div",_o,[(T(!0),x(Ge,null,Qe(C.value,($,k)=>(T(),x("div",{key:$.name,class:"image-item"},[o(pe,{class:"image-card",shadow:"hover"},{header:s(()=>[d("div",ho,[d("span",yo,y(Ve($.name)),1),d("div",wo,[o(a,{type:"primary",size:"small",onClick:G=>Be($),icon:"View"},{default:s(()=>t[41]||(t[41]=[g(" é¢„è§ˆ ")])),_:2},1032,["onClick"]),o(a,{type:"success",size:"small",onClick:G=>Ie($),icon:"Download"},{default:s(()=>t[42]||(t[42]=[g(" ä¸‹è½½ ")])),_:2},1032,["onClick"])])])]),default:s(()=>[d("div",{class:"image-content",onClick:G=>Be($)},[d("img",{src:$.url,alt:$.name,class:"result-image",onLoad:je,onError:Me},null,40,ko),d("div",$o,[o(He,{class:"preview-icon"},{default:s(()=>[o(Xe(Ye))]),_:1})])],8,bo),d("div",Po,[o(U,{column:1,size:"small"},{default:s(()=>[o(h,{label:"æ–‡ä»¶å"},{default:s(()=>[g(y($.name),1)]),_:2},1024),o(h,{label:"å¤§å°"},{default:s(()=>[g(y(Te($.size)),1)]),_:2},1024),o(h,{label:"åˆ›å»ºæ—¶é—´"},{default:s(()=>[g(y(Ce($.name)),1)]),_:2},1024)]),_:2},1024)])]),_:2},1024)]))),128))]))])]),_:1}),o(pe,{class:"image-card-container"},{header:s(()=>[d("div",Io,[t[46]||(t[46]=d("span",null,"ğŸ“ˆ æ¯ä»£æœ€ä¼˜ç»“æ„å›¾",-1)),d("div",To,[o(a,{type:"primary",size:"small",onClick:ee,loading:ce.value},{default:s(()=>t[43]||(t[43]=[g(" åˆ·æ–°ç»“æ„å›¾ ")])),_:1},8,["loading"]),o(a,{type:"success",size:"small",onClick:ft,disabled:L.value.length===0},{default:s(()=>t[44]||(t[44]=[g(" ä¸‹è½½å…¨éƒ¨ ")])),_:1},8,["disabled"]),o(a,{type:"danger",size:"small",onClick:vt,disabled:!_.value.imagePath},{default:s(()=>t[45]||(t[45]=[g(" æ¸…ç†å›¾ç‰‡ ")])),_:1},8,["disabled"])])])]),default:s(()=>[d("div",Co,[L.value.length===0&&!ce.value?(T(),x("div",So,[o(W,{description:"æš‚æ— æ¯ä»£æœ€ä¼˜ç»“æ„å›¾"},{description:s(()=>[t[48]||(t[48]=d("p",null,"æ¯ä»£æœ€ä¼˜ç»“æ„å›¾å°†åœ¨æ­¤å¤„æ˜¾ç¤º",-1)),o(a,{type:"primary",onClick:ee},{default:s(()=>t[47]||(t[47]=[g("åˆ·æ–°ç»“æ„å›¾")])),_:1})]),_:1})])):ce.value?(T(),x("div",xo,[o(Fe,{rows:3,animated:""})])):(T(),x("div",No,[(T(!0),x(Ge,null,Qe(L.value,($,k)=>(T(),x("div",{key:$.name,class:"image-item"},[o(pe,{class:"image-card",shadow:"hover"},{header:s(()=>[d("div",zo,[d("span",Uo,y(Ve($.name)),1),d("div",Oo,[o(a,{type:"primary",size:"small",onClick:G=>Je($),icon:"View"},{default:s(()=>t[49]||(t[49]=[g(" é¢„è§ˆ ")])),_:2},1032,["onClick"]),o(a,{type:"success",size:"small",onClick:G=>Ae($),icon:"Download"},{default:s(()=>t[50]||(t[50]=[g(" ä¸‹è½½ ")])),_:2},1032,["onClick"])])])]),default:s(()=>[d("div",{class:"image-content",onClick:G=>Je($)},[d("img",{src:$.url,alt:$.name,class:"result-image",onLoad:je,onError:Me},null,40,Ro),d("div",Lo,[o(He,{class:"preview-icon"},{default:s(()=>[o(Xe(Ye))]),_:1})])],8,Eo),d("div",Do,[o(U,{column:1,size:"small"},{default:s(()=>[o(h,{label:"æ–‡ä»¶å"},{default:s(()=>[g(y($.name),1)]),_:2},1024),o(h,{label:"å¤§å°"},{default:s(()=>[g(y(Te($.size)),1)]),_:2},1024),o(h,{label:"åˆ›å»ºæ—¶é—´"},{default:s(()=>[g(y(Ce($.name)),1)]),_:2},1024)]),_:2},1024)])]),_:2},1024)]))),128))]))])]),_:1}),o(It,{modelValue:ie.value,"onUpdate:modelValue":t[9]||(t[9]=$=>ie.value=$),title:((qe=Q.value)==null?void 0:qe.name)||"å›¾ç‰‡é¢„è§ˆ",width:"80%",center:""},{footer:s(()=>[d("div",Jo,[o(a,{onClick:t[7]||(t[7]=$=>ie.value=!1)},{default:s(()=>t[51]||(t[51]=[g("å…³é—­")])),_:1}),o(a,{type:"primary",onClick:t[8]||(t[8]=$=>Ie(Q.value))},{default:s(()=>t[52]||(t[52]=[g("ä¸‹è½½å›¾ç‰‡")])),_:1})])]),default:s(()=>[Q.value?(T(),x("div",Bo,[d("img",{src:Q.value.url,alt:Q.value.name,class:"preview-image"},null,8,Vo)])):E("",!0)]),_:1},8,["modelValue","title"])])}}}),Ho=xt(Ao,[["__scopeId","data-v-687cd9aa"]]);export{Ho as default};
